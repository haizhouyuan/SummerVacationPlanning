# 开发任务说明文档

以下基于 **haizhouyuan/SummerVacationPlanning** 仓库最新 master 分支，详细说明每项开发任务的目标、涉及修改的文件模块、开发要点以及验收标准。

## 1. 学生端“成长与奖励中心”页面重构合并

### 目标

·       **统一成长与奖励功能**：将原本分散的“成就广场”、“积分历史”、“奖励中心”三项功能合并到一个学生端页面 —— **“成长与奖励中心”**，提供集中展示学生成长和奖励相关信息的入口，提升页面一致性和易用性。

·       **模块整合**：在新页面中分区域展示成就徽章、积分收支记录，以及特殊奖励兑换申请及其审批状态，方便学生一站式查看成长成果与奖励情况。

### 修改文件/模块

·       前端页面组件：

·       frontend/src/pages/Rewards.tsx（原**奖励中心**页面） – 将其扩充/改造为新的**成长与奖励中心**页面，包含成就徽章和积分历史模块。

·       frontend/src/components/PointsHistory.tsx – 可能需调整用于页面内嵌显示积分历史（去除模态框样式）。

·       frontend/src/components/dashboard/AchievementBadge.tsx 等成就徽章相关组件 – 用于呈现学生成就徽章的组件，可复用以横向滚动方式展示徽章。

·       导航与路由：

·       frontend/src/components/Layout.tsx – 修改导航菜单：移除单独的“成就广场”入口，原“奖励中心”菜单项重命名为“成长与奖励中心”。

·       frontend/src/components/BottomNav.tsx – 修改移动端底部导航：去掉“积分历史”按钮，将“奖励中心”重命名为“成长与奖励”。

·       frontend/src/pages/AchievementSquare.tsx – 原“成就广场”页面不再单独使用，可考虑删除或停用其路由（对应 /achievements）以避免重复。

·       frontend/src/pages/Dashboard.tsx – 更新仪表盘页面中的快捷操作按钮：移除指向“成就广场”和“积分历史”的按钮，保留统一的“成长与奖励中心”入口。

### 开发要点

·       **成就徽章模块**：在**Rewards.tsx**页面顶部新增“🏆 成就徽章”展示区。开发时：

·       调用后端接口获取当前用户的成就数据（例如通过仪表盘统计接口获得已解锁徽章列表或成就列表）。将获取到的成就徽章列表渲染为水平可滚动的徽章条带，每个徽章使用已有的 AchievementBadge 组件显示。确保横向滑动在移动端手势下流畅。

·       徽章展示应区分已解锁和未解锁状态（例如已解锁的徽章显示彩色，未解锁的灰度或半透明），并附简短标题或提示（可选）以鼓励用户收集更多徽章。

·       **积分历史模块**：在**Rewards.tsx**中间部分集成“💎 积分收支记录”列表：

·       重用 PointsHistory 组件的核心逻辑。需要修改 PointsHistory.tsx 使其支持页面内展示：去除其固定定位和遮罩 (fixed inset-0 ... 等)，改用普通容器布局。确保筛选控件和列表布局适合嵌入页面。

·       保留时间筛选（“今天/本周/本月/全部”）和类型筛选（“全部/获得/消费”）按钮功能，实现按时间范围或积分获取/消耗类型筛选记录。交互上，点击筛选按钮应更新组件内部状态并重新渲染列表。

·       列表显示内容包括日期时间、描述、积分变动值及来源详情等，与原模态框列表一致。注意在页面中样式需与整体风格统一，使用现有 Tailwind CSS 类，如卡片、文字颜色等，确保与周围模块视觉协调。

·       **特殊奖励兑换模块**：保留并调整原奖励中心页面的“特殊奖励兑换”部分：

·       上半部分**游戏时间兑换**功能：继续提供“积分兑换游戏时间”的输入和按钮（如原来的输入积分数、选择游戏类别、显示可兑换分钟及“立即兑换”按钮）。该部分无需大改，仅需验证在新页面布局下正常工作。

·       下半部分**特殊奖励列表**：继续展示可兑换的特殊奖励项，每项显示奖励名称、描述、所需积分及兑换按钮。如果用户积分不足按钮应置灰或提示“积分不足”。点击“兑换”时，调用后端 POST /redemptions 创建兑换申请，并提示“兑换请求已提交，等待家长审核”[_[1]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L826-L835)。完成申请后应刷新本模块数据（调用loadData()或单独更新列表）[_[2]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L832-L840)。

·       **新增兑换申请状态列表**：在特殊奖励区下面新增一个“小列表”或提示区域，列出当前用户**所有已提交的奖励兑换申请及其审批状态**。开发时：

o   调用后端 GET /redemptions 接口获取当前用户提交的兑换请求列表[_[3]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/backend/src/controllers/redemptionController.ts.bak#L60-L99)。接口支持按用户过滤，默认返回当前用户所有申请，按时间倒序。

o   将每条申请以列表项显示：包括奖励名称、消耗积分、申请日期，以及当前状态（pending待审批、approved已批准、rejected已拒绝）。对于pending状态的请求，可在文本上标注例如“（待家长审核）”以提醒用户等待审批；已批准或拒绝的请求则标明结果（如“已批准”/“已拒绝”）和处理时间或备注（如果有）。

o   确保当用户新提交兑换申请后，此列表实时更新显示新记录状态为“待审批”。当家长端审批操作后（可能通过刷新或重新登录）状态会变为已批准/已拒绝。

·       **导航与入口**：

·       更新导航文字：在 Layout.tsx 导航项中，将路径 /rewards 的名称从“奖励中心”修改为“成长与奖励”，并调整描述为“展示徽章、积分和奖励”以反映新页面内容[_[4]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/Layout.tsx#L50-L58)。

·       底部导航 BottomNav.tsx 去掉 path: '/points-history' 的积分历史入口[_[5]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx#L50-L58)；保留 /rewards 路径但名称改为“成长与奖励”。同时，为符合需求“底部保留三个按钮”，可以考虑**移除首页****(Home)**图标按钮，使底部仅剩“任务规划”、“成长与奖励”、“简化版”三项（首页仪表盘可通过顶部Logo或其他方式返回）。

·       仪表盘页面快捷操作按钮（Dashboard 页面的“快速操作”卡片）同步更新：移除其中指向/achievements和触发积分历史弹窗的按钮，仅保留“📅 任务规划”、“🎁 成长与奖励”、“⚡ 简化版”三个按钮[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L418-L427)[_[7]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L434-L440)。这样无论移动端（底部导航）还是网页端（快捷操作卡片），进入成就/积分相关内容均通过统一的“成长与奖励中心”页面。

·       **样式统一**：确保新合并页面在移动端和PC端均具有良好体验。成就徽章横向滚动区域在窄屏下可通过手指左右滑动查看全部徽章；积分历史列表在移动端纵向排列良好，文字不溢出；整个页面的布局（徽章区、积分历史区、兑换区）在PC端宽屏下居中对齐并合理利用空间，不显得过于拥挤或空旷。

### 验收标准

·       **页面合一**：登录学生账号后，点击导航或底部的“成长与奖励”进入新页面。页面顶部显示“成就徽章”板块，中间是“积分历史”记录，底部是“积分兑换奖励”相关内容。原独立的“成就广场”页面入口无须再使用，确保用户只能通过新页面访问相关内容。

·       **成就徽章展示**：学生已解锁的徽章能够正确显示图标和名称，未解锁的徽章以灰暗状态显示或不显示。徽章列表支持左右滑动浏览，滑动流畅不卡顿。移动端下一屏应至少能部分预览后续徽章以提示可滑动。PC端横向空间充足时，可直接平铺显示多枚徽章。

·       **积分历史记录**：筛选按钮和搜索框功能正常。选择不同时间范围（今天、本周、本月、全部）或类型（获得/消费）后，积分记录列表按照筛选更新，数据准确无遗漏。列表项显示的信息完整：包含日期时间、描述、+/-积分值及类别/来源图标[_[8]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/PointsHistory.tsx#L273-L282)[_[9]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/PointsHistory.tsx#L287-L296)。在极端情况下（记录很多）列表可以滚动查看且样式不乱。移动端操作筛选按钮不影响布局，列表可垂直滚动查看所有记录。

·       **特殊奖励兑换**：

·       游戏时间兑换功能与之前一致：输入积分数，选择游戏类型后点击“立即兑换”，积分足够时弹出兑换成功提示，增加相应游戏时间[_[10]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L802-L810)；积分不足时弹出提示不允许兑换[_[11]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L790-L798)[_[12]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L12-L20)。兑换后gameTimeStats信息实时更新，页面上基础时间、奖励时间、总可用时间和剩余时间数值正确变化[_[13]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L20-L28)[_[14]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L30-L39)。

·       特殊奖励列表显示正确：每个可兑换奖励的名称、说明和所需积分清晰可见。当用户积分不足时，该奖励的兑换按钮不可点击或标记为“积分不足”[_[15]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L62-L71)；积分足够时，点击“兑换”弹出确认对话，确认后提交申请，用户积分不立即扣减（等待家长审批），页面提示“兑换请求已提交，等待家长审核”[_[1]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L826-L835)。

·       兑换申请状态列表准确：提交兑换申请后，新申请显示在状态列表中，状态为“待审批”。模拟家长端批准或拒绝操作后，再次获取列表，相关申请状态更新为“已批准”或“已拒绝”。列表按照申请时间排序，最新的申请在最上方，内容包括奖励名称、消耗积分和当前状态文字。如有备注或处理时间也一并显示（若实现的话）。没有提交过任何兑换申请时，该列表区域应显示如“暂无兑换申请”之类的提示文字。

·       **导航验证**：顶部菜单“成长与奖励中心”文字正确，点击后能打开页面；移动端底栏仅剩3个图标按钮，分别对应任务规划、成长与奖励中心、简化模式，图标和文字与功能匹配。已移除的“成就广场”/“积分历史”入口在任何导航处均不可见，直接访问其旧URL（如 /achievements）应当重定向到仪表盘或新页面，避免404或迷惑用户。

·       **响应式与体验**：在手机上查看“成长与奖励中心”页面，各模块垂直排列顺序合理，无需横向滚动即可查看内容（徽章区除外横滑动作）。在平板、PC上查看时，各模块宽度适应居中：徽章区、积分历史区等不会拉伸过宽；可以采用最大宽度限制（如容器宽度不超过一定值）。整体配色和UI风格与现有应用保持一致（使用已有主题颜色类，如text-cartoon-dark、bg-white卡片背景等），没有明显样式冲突。功能交互无报错，页面切换和数据加载流畅。

## 2. 学生端仪表盘（Dashboard）移动端界面简化优化

### 目标

·       **精简欢迎信息**：优化移动端仪表盘顶部的欢迎语，去除冗长的称呼，突出当天任务提示，让界面更简洁友好。

·       **突出积分概览**：在仪表盘顶部直观显示学生当前总积分和当天已获得积分，以激励学生完成当日任务。

·       **移除次要信息**：简化仪表盘内容，去除繁杂的进度统计和等级信息，使学生聚焦于每日任务本身，减少干扰。

·       **优化任务列表展示**：移动端一次性完整展现“今日任务”列表项，不在小窗口内滚动，方便学生浏览当日所有任务。

·       **统一操作入口**：底部仅保留核心操作按钮（任务规划、成长与奖励中心、简化模式），方便学生快速访问主要功能。

### 修改文件/模块

·       **欢迎横幅组件**：frontend/src/components/dashboard/WelcomeBanner.tsx

·       修改欢迎语文本：移除原有“欢迎回来，{姓名}！”字样，改为简洁问候语（例如：“你好，今天的任务准备好了吗？”）[_[16]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L36-L44)。

·       不再直接显示用户姓名，确保在移动端一屏幕上方文本不占过多空间。

·       去除角色描述行中对于学生端的冗余文字（如“准备好开始今天的冒险了吗？ 🚀”），直接用简短问候替代即可。

·       移除欢迎横幅中**等级显示**元素：包括表示等级的图标及“等级 X”文本[_[17]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L53-L61)。该紫色背景的等级卡片不再显示，用于腾出空间显示积分信息。

·       扩展组件属性：允许 WelcomeBanner 接受当日积分数据（如 todayPoints），以便显示“总积分/今日积分”。

·       **仪表盘页面**：frontend/src/pages/Dashboard.tsx

·       在渲染 WelcomeBanner 时，传入当前用户总积分（user.points）和当日已获得积分值（需计算，见开发要点）用于显示[_[18]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L54-L62)。去除传入的 userLevel 或调整 WelcomeBanner 内部使其无需等级参数。

·       移除**今日进度卡片**：即删除 Dashboard 中包含 <ProgressStats> 的元素，不再引入或渲染 ProgressStats 组件[_[19]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L375-L383)[_[20]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L393-L401)。这将去除原本仪表盘中展示的“今日完成X/Y任务、获得Z积分”以及“本周进度”等统计信息卡片。

·       移除**徽章成就区块**：即删除 <AchievementGrid> 组件的渲染[_[20]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L393-L401)。不再在仪表盘直接展示等级进度和成就徽章网格，这部分功能已转移到新的成长与奖励中心页面。

·       调整“今日任务”列表显示：确保 <TodayTaskList> 组件能够完整列出所有当日任务项。在需要时可修改其样式：

o   去除可能限制任务列表高度的样式，使其根据任务项自然撑开页面。在当前实现中，TodayTaskList 默认即随内容高度扩展并让页面本身滚动，无内部滚动条，如有特殊设置需取消。

o   确认 TodayTaskList 内部不会再重复展示“今日进度”统计（该组件底部原有一个今日进度汇总条，后续将移除，见下文）。

·       调整/移除其他多余元素：

o   **统计信息**：如有其他统计相关的小组件或文本（例如 “今日进度”小结、学习连击等）在移动端一律隐藏或删除，避免重复信息。特别地，如 TodayTaskList 底部的“今日进度 完成X/Y任务 (Z%)，今日积分N/N”进度条需要移除，以免与顶部显示的“今日积分”重复。

o   **快捷操作**：Dashboard 页底部原有“快速操作”卡片在移动端本就隐藏（通过hidden sm:block），因此移动端不显示额外按钮区域，一切快捷入口都通过底部导航提供即可。

·       **今日任务列表组件**：frontend/src/components/dashboard/TodayTaskList.tsx

·       删除组件内的**今日进度汇总**区块：这是列表下方用彩色背景显示今日完成任务数和积分的小结及进度条[_[21]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L147-L156)[_[22]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L160-L168)。该片段不再需要，因我们已在顶部集中显示积分概览，而且进度卡片已移除。删去这段 JSX，使 TodayTaskList 列表纯粹列出任务和“添加任务”按钮。

·       验证删除后，组件顶部“✅ 今日任务”标题和➕添加任务按钮功能不受影响；底部去掉汇总后样式应自然闭合，无空白。

·       **底部导航**：frontend/src/components/BottomNav.tsx

·       修改导航项配置，仅保留三个学生端项：

o   任务规划（📅）/planning

o   成长与奖励（🎁）/rewards – 名称从“奖励中心”改为“成长与奖励”

o   简化版（⚡）/lite

·       将数组 navigationItems 对学生角色的定义调整：去除首页仪表盘项（🏠 首页）和积分历史项（💎 积分历史）[_[23]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx#L37-L45)[_[24]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx#L50-L59)。这样在移动端底部将只有上述三项。需要注意移除首页按钮后，学生若需返回仪表盘主页，可通过点击顶部应用Logo（已绑定返回仪表盘的导航）来实现[_[25]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/Layout.tsx#L84-L93)。

·       确认删除后 BottomNav 的 grid 栅格列数与项数匹配（可以将原 grid-cols-5 改为 grid-cols-3），图标文字居中显示正常。

### 开发要点

·       **今日积分计算**：在 Dashboard 组件中计算当前**今日已获得积分**：

·       待 Dashboard 加载完今日任务列表后，遍历当日任务数组（todayTasks）统计所有状态为已完成(status === 'completed')的任务积分总和。例如：

    const todayPointsEarned = todayTasks  .filter(t => t.status === 'completed')  .reduce((sum, t) => sum + (t.task?.points || 0), 0);

            该值即为“今日积分”。将其与用户总积分（user.points）一起传递给 WelcomeBanner，用于显示。

·       注意在任务完成操作后更新今日积分：Dashboard 中已有逻辑，当任务标记完成时调用 loadDashboardStats() 刷新用户总积分等[_[26]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L264-L273)。在触发任务完成动画后，可以重新计算或通过状态更新确保 todayPoints 变化。也可在每次 loadTodayTasks() 后重新计算今日积分并存入 state。

·       **WelcomeBanner** **修改**：

·       更新 JSX 模板：将 h2 标题改为简短问候语字符串，如 "你好，今天的任务准备好了吗？"，取消其中对 user.displayName 的插值[_[16]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L36-L44)。由于已不需要称呼具体姓名，“欢迎回来”字样删除，句尾保留问号或表情增强亲切感皆可。

·       时间问候语 getTimeGreeting() 可以保留作为次要提示，但要防止文字过多。如果保留，可将其改为更简洁的一句话或干脆隐藏移动端的时间段问候，避免占用空间[_[27]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L48-L51)（根据需要决定）。

·       移除等级展示部分的 JSX，包括等级图标、等级号和称号等元素[_[17]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L53-L61)。这些元素的父容器 .flex 可能包含总积分显示，也需调整：

o   可将原本用于显示总积分和等级的两列布局改为显示“总积分 / 今日积分”。例如，将总积分 PointsDisplay 保留，删除等级块后，用一个新的容器元素紧随其后显示今日积分。

o   今日积分显示可使用简单文本或设计一个类似 PointsDisplay 的小组件。可行方案：在 WelcomeBanner 内新增一段：

    <div className="bg-gradient-to-r from-cartoon-purple to-primary-400 rounded-cartoon-lg px-4 py-2 text-white">  <span className="font-bold text-sm">📊 今日积分 {todayPoints}</span></div>

            与总积分的绿色块并排展示[_[17]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L53-L61)。注意调整父容器的 flex 布局和间距，使两块横向并列居中。最终效果为例如：“🟢150” 和 “📊 30” 两个块并排，代表总积分150和今日积分30。

·       样式需适配小屏幕：确保上述两块在移动端屏幕宽度下仍能并排显示（可用 flex-wrap: wrap 避免溢出）。如空间不足，也可简化显示为纯文本一行：“总积分 150 / 今日积分 30”放入一个容器中心显示，省去背景块样式。

·       **移除多余组件**：

·       Dashboard 中引入的 ProgressStats、AchievementGrid、SummerProgressTracker 组件在移动端均不再需要。删除对应 import 和 JSX 调用[_[28]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L10-L14)[_[19]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L375-L383)[_[20]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L393-L401)[_[29]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L444-L447)。这样移动端将不再渲染这些部分，从根本上减少不必要元素。

·       同时检查 TodayTaskList 组件底部的“今日进度”汇总并将其删除[_[21]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L147-L156)。可在 TodayTaskList 组件内直接移除该段 JSX，包括进度百分比和进度条部分[_[22]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L160-L168)。删除后，要测试确保这不会影响组件在 Dashboard 中的使用。由于该部分在卡片内部底部，移除只会让卡片结尾提前，无副作用。

·       **布局调整**：

·       删除 ProgressStats/AchievementGrid 后，Dashboard 主体将主要由 WelcomeBanner 和 TodayTaskList 两部分构成。注意这两部分之间的间距和顺序：

o   WelcomeBanner 可能需要减少底部外边距（margin-bottom）以腾出更多空间给任务列表一屏展示。如果 WelcomeBanner 使用了类似 className="mb-6"在 Dashboard 传入，可根据视觉效果酌情修改（例如减小为mb-3）。

o   TodayTaskList 卡片默认已是 col-span-full 占据容器全宽[_[30]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L79-L87)。移动端下一屏直接看到任务列表，无需滚动时就能看到头几个任务。如果任务较多，页面整体可滚动查看余下任务。

·       底部导航调整后，由于移除了首页按钮，需要确保底栏布局正常：

o   修改 grid-cols-5 为 grid-cols-3[_[31]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx#L84-L92)，每个格子对应一个按钮。检查三个按钮在各自网格单元中居中对齐。重新计算 NotificationBadge 徽标的适应（如有未审批任务红点只在家长端任务审批按钮上，学生端底栏这三项一般不会带提示数）。

o   重命名“奖励中心”为“成长与奖励”后，注意文字长度略有增加，底栏按钮可能需要略微调整文字大小或隐藏部分字。当前样式 text-xs 应可容纳4个字，但如有样式问题可考虑将底栏仅展示图标，或使用更短词。如必须，移动端底栏文本可以简写成“奖励”来适配（不过根据需求，完整呈现“成长与奖励”较好）。

·       **功能验证**：调整完成后，需重点测试：

·       页面首次加载时 WelcomeBanner 正确获取到了 todayPoints（特别是在非Demo模式下是否通过API统计）。如果 Dashboard Stats API 不直接提供今日积分，需要确保我们自己的计算准确无误。

·       添加新任务、完成任务后，用户总积分和今日积分变化是否实时反映在顶部显示（welcomeBanner可能需要刷新props，可通过 state或重新渲染解决）。例如，在当天首次完成一个任务后，今日积分块应从0变为相应任务积分值。

·       删除组件后页面无报错：打开浏览器控制台确认没有因为缺少 ProgressStats 等导致的JS错误或样式错误。

·       响应式布局：在窄屏手机和中等平板上查看，上述改动的元素是否都按预期隐藏或显示，没有占空或错位。比如，横幅和任务列表之间没有出现空白“今日进度”块，底部导航按钮点击区域依然正常等。

### 验收标准

·       **欢迎语简洁**：移动端仪表盘顶部不再出现“欢迎回来，XXX！”字样，而是替换为精炼的问候句，比如**“你好，今天的任务准备好了吗？”**。整个欢迎横幅在一屏内高度明显缩减，仅包含主要图标和一句问候语。

·       **积分概览清晰**：欢迎横幅下方（或其中）直接可见**总积分** **/** **今日积分**并排显示。例如，学生当前总积分为150分，今日已获得30分，则顶部显示类似“**150 / 30**”或“**总积分****150****，今日30**”。字体颜色和背景与整体风格一致，总积分部分可保持原绿色底+白字，小幅块形式；今日积分部分以另一种醒目方式（如紫色底白字）显示。两者横排居中，无重叠或换行现象。

·       **无等级显示**：移动端界面上找不到原先的“等级X”文字和等级图标，学生等级信息被移除，不再占据界面空间。连续登录天数、称号等统计也不在移动端展示。

·       **任务列表完整**：在一屏中，除欢迎语和积分概览外，其余主要内容即为“今日任务”列表。任务列表紧跟其上方元素，无中间多余留白。列表项全部直接可见，若任务较多超出屏幕，**通过整页滚动**查看后续任务；不存在嵌套的滚动条，也无需点击“展开”之类按钮。举例来说，如果有5个任务，手机上一屏或许显示3个，用户上滑页面即可看到余下2个任务。

·       **统计卡片移除**：移动端仪表盘不再出现任何形式的进度条或统计卡片：

·       没有“今日进度”环形或条形图，无“已完成X/总Y任务”文字说明（这些统计已被拿掉）。

·       没有“本周进度”“暑假进度追踪”等板块。

·       也没有成就徽章网格或等级进度条出现。这些改动在视觉上使得移动端仪表盘界面非常简洁：顶部问候+积分，下面直接列出任务。

·       **底部导航精简**：学生端底部导航栏现在只有3个图标按钮，分别对应：

·       **任务规划** (📅)

·       **成长与奖励** (🎁)

·       **简化版** (⚡) 点击每个按钮能正确导航到相应页面。原“首页”按钮已移除，确认点击其他按钮或应用Logo能够返回仪表盘主页面，不影响导航体验。底部栏三个按钮均匀分布，图标清晰，选中高亮效果正常。

·       **整体体验**：简化后的移动端仪表盘加载迅速，没有多余信息干扰。用户打开应用即能快速看到当天需做哪些任务和已有多少积分奖励。当用户完成任务后，顶部今日积分数字即时增加，验证了数据联动性。界面整体卡通风格保持，未出现布局错乱或元素重复现象。

## 3. 学生端仪表盘网页端界面调整保持一致

### 目标

·       **同步移动端改动**：将移动端仪表盘的精简改动应用到网页端（PC浏览器）仪表盘，确保不同设备上学生看到的内容和布局方向一致，不再显示被淘汰的进度或成就板块。

·       **充分利用宽屏**：在简化内容的同时，利用网页端较宽的视图，保持任务列表的栅格布局，方便学生在PC上并行浏览多项任务，提高信息密度。

·       **优化版面布局**：在移除冗余板块后，调整剩余元素（任务列表、快捷操作按钮）的摆放，使页面视觉平衡且不留空。

### 修改文件/模块

·       frontend/src/pages/Dashboard.tsx（同上任务2）：

·       网页端与移动端共用此组件，大部分改动与任务2一致：已移除 ProgressStats、AchievementGrid、SummerProgressTracker 等组件的渲染，不另行重复。

·       需要针对网页端检查并调整布局栅格：Dashboard 中原有用于布局统计卡片和成就网格的 <div className="grid grid-cols-1 lg:grid-cols-2 ..."> 容器[_[32]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L372-L380)将不再包含内容，可直接删除或重构。

·       **快捷操作按钮区域**：原<Card className="hidden sm:block">快速操作卡片和暑假追踪一起放在一个3列栅格中[_[33]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L404-L413)[_[29]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L444-L447)。删除暑假追踪后，该栅格仅剩一列实际内容，需要修改：

o   将父容器修改为单列布局：例如改为 grid-cols-1（或直接不用grid）。或者干脆将快捷操作 Card 从栅格容器中拿出，单独作为一个全宽元素放置在页面底部。

o   给快捷操作 Card 添加合适的宽度样式：为了在网页端美观，可令其在大屏幕居中。可以包裹一层 <div className="max-w-md mx-auto"> 控制宽度，或直接在 Card 上使用 className="w-full" 让其撑满父容器（父容器已有 max-w-7xl 居中）。

o   维护 Card 内按钮列表：如任务1所述，应只保留“任务规划 / 成长与奖励 / 简化版”三个按钮，并将 Card 标题从“快速操作”改成空或更简洁标题（也可不显示标题，只保留按钮列表），避免仍出现“成就广场”等无用按钮[_[34]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L408-L416)[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L418-L427)。

·       样式文件（如果有自定义 CSS，可检查是否有针对 .dashboard 页面 large-screen 下列布局的定义，确保删除模块后无多余样式）。

·       其余组件如 WelcomeBanner、TodayTaskList 在网页端同样受改动影响，但本任务主要关注布局：

·       WelcomeBanner 在网页端仍然显示，但内容变更（无姓名、无等级）已由任务2处理，这里不需额外修改，仅验证在大屏下样式是否合理（例如欢迎语字体和两块积分显示在宽屏上仍居中，不显得过于空旷）。

·       TodayTaskList 本身具有响应式列布局：grid-cols-1 md:grid-cols-2 lg:grid-cols-3，确保依然生效[_[35]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L90-L98)。删除内部汇总后，底部对齐无问题。

·       **路由**：无需修改。网页端仍通过/dashboard路由访问学生仪表盘。已去除的/achievements等路由如果不删，也不会在导航中出现。

### 开发要点

·       **栅格布局调整**：

·       移除统计卡片后，上半部分 WelcomeBanner 将自然宽度100%（在 max-w-7xl 容器内），下半部分 TodayTaskList 也是100%。这样在网页端，会出现 WelcomeBanner一行，下面 TodayTaskList 可能占多行（任务多时分多列）。

·       原先 ProgressStats 和 AchievementGrid 并排占两列，现在都没了，避免空列：可直接删掉包含它们的 <div className="grid grid-cols-1 lg:grid-cols-2 gap-6"> 容器[_[32]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L372-L380)。删除后，WelcomeBanner和TodayTaskList这两个组件就直接顺序堆叠在页面，没有额外网格约束，更简洁。

·       快捷操作 Card 原在一个3列网格中占一列（其余两列由 SummerProgressTracker 占）[_[33]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L404-L413)[_[29]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L444-L447)。移除 SummerProgressTracker 后，可改成单列：

o   方法1：将该 Card 容器的类从 grid-cols-3 改为 grid-cols-1。因 Card 本身有 hidden sm:block，该容器在移动端是隐藏的，不影响移动端。

o   方法2：直接把 Card 从 grid容器独立出来：例如在 Dashboard JSX末尾单独渲染：

    {user?.role === 'student' && (  <Card className="mt-4 mb-6 w-full hidden sm:block" ...> ... </Card>)}

            放置于 Footer Animations 之前。这可确保在PC端，这个 Card 在任务列表下面全宽显示。mt-4给予与上方任务列表适当间距。

o   要保证 Card 内按钮布局不变（垂直排列按钮，占据 full width 按钮样式早已定义）。可酌情将 Card 宽度限制，例如在父容器加 .max-w-sm mx-auto，让按钮区域不会无限拉伸。

·       **多列任务列表**：TodayTaskList 已具备在md以上屏幕多列显示任务卡片的功能[_[35]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L90-L98)。我们移除统计后，这部分不受影响。但应测试：当任务卡片很多时，是否在PC端自动排成两列、三列，且高度均匀对齐。如果列高不一致导致排版不整齐，可考虑为任务卡片设置统一高度（不过通常任务描述长短不同，高度不易强制一致，可以接受不齐）。

·       **视觉平衡**：

·       删除大量元素后，网页端仪表盘可能显得较“空”。通过CSS确保内容居中：

o   WelcomeBanner 默认是居中对齐的卡片，宽度可能较窄（取决于字体长度），可以接受。TodayTaskList卡片是全宽（max-w-7xl），里面的任务网格有左右留白padding，看起来不会太散。

o   快捷操作 Card 如果全宽铺开，在超大屏幕上显得按钮分布过开。不妨限定宽度：给 Card 外容器加 max-w-lg mx-auto, 使按钮区域在PC上大约居中500px宽。这样三个按钮竖向排列且居中。

o   如果认为网页端完全移除进度和成就后信息量过少，也可考虑在PC端保留部分简要统计（但根据需求应该去除）。按照需求，我们确保不显示这些块，所以宁可页面简单也不恢复它们。

·       **功能验证**：

·       PC端加载 Dashboard，检查控制台无错误。由于我们删除了一些组件，确保没有残留对它们的引用。比如 Dashboard 里 stats 状态可能只用于 ProgressStats，如无用应一并清理。

·       导航及底部情况：PC端顶部导航栏本来就有“仪表盘”、“任务规划”、“成长与奖励中心”等项，点击切换正常。底部导航在md以上隐藏，因此PC不受底部改动影响。

·       **任务列表**：在PC浏览器窗口拉宽，确认任务列表按屏幕宽度自动排布多列。例如，当有6个任务时，在lg屏幕下应呈两行三列（每列2个任务卡片），在md屏幕下两列3行，以此类推[_[35]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L90-L98)。没有进度条干扰布局后，各列卡片对齐整齐。

·       **滚动**：内容少时，页面底部快捷操作卡片应该贴底部或有合理留白；内容多时，页面可以纵向滚动，顶部导航栏应依然固定可见（原Layout里 Navbar 是 sticky）。

·       **兼容性**：中等屏幕（平板）介于移动和PC之间，应同时验证：比如宽度800px左右（sm～md断点），此时底部导航可能刚好隐藏（因为 md:hidden，小于768px才显示底栏，大于等于768px走顶部导航）。因此在宽约800px设备上，会显示顶部导航且没有底部导航，我们要确保此时快速操作 Card 是可见的（因为 sm:block）并位于页面底部提供导航功能。如果在这种宽度下快速操作 Card 不出现，则需要调整其隐藏断点（例如改为 md:block）。根据代码[_[36]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L406-L414)快速操作 Card 是 hidden sm:block，所以≥640px就出现。因此在800px宽（≥640）会看到快捷操作 Card，在顶部导航也有，所以其实重复。但考虑用户主要用顶部菜单即可，也无妨。同样地，在小屏手机（<640）只有底栏、无快速操作 Card。

### 验收标准

·       **内容统一**：在PC等大屏幕上登录学生仪表盘，看到的内容模块与移动端保持一致：顶部问候和积分概览、下面今日任务列表，再下面是快捷操作按钮卡。原先PC端特有的“今日进度/本周进度/暑假进度追踪”统计图表均不见了，取而代之的是一个更简洁的界面。

·       **欢迎与积分**：欢迎横幅在PC端居中显示，没有多余文字，包含总积分/今日积分信息（内容同移动端，只是布局上在PC端可能左对齐或居中）。例如页面顶端正中显示“你好，今天的任务准备好了吗？”下方有“150 / 30”积分概览，两侧没有其他元素干扰。

·       **任务列表栅格**：在宽屏下，今日任务列表以多列网格方式展现。举例：

·       浏览器窗口全屏（假设宽度 > 1200px），有6个任务，则以3列×2行网格显示，每个任务卡片大小一致，间距均匀。

·       缩小窗口到中等宽度（例如900px），任务列表自动调整为2列×3行。

·       再缩小到窄屏（<640px）则变为1列列表（这部分和移动端一致，由响应式属性自动做到）。 无论窗口大小如何调整，任务卡片的对齐和换行符合 Tailwind 定义的断点，没有出现空的列占位或排列异常情况。

·       **无冗余板块**：PC端不存在空白的区域曾经属于那些移除的板块。例如在任务列表旁没有空白侧栏，“暑假进度追踪”板块消失后没有一个空的大块区域。页面内容紧凑而不过度稀疏。

·       **快捷操作可用**：在PC端仪表盘底部**显示三个快捷操作按钮**（仅当窗口宽度达到 sm断点，因为我们设置了hidden sm:block）：

·       “任务规划”按钮点击跳转任务规划页面；

·       “成长与奖励”按钮跳转新合并页面；

·       “简化版”按钮进入简化仪表盘视图。 这三个按钮外观与之前相同（彩色渐变背景的长按钮，带Emoji和文字），纵向排列成一个卡片。卡片宽度适中：在超大屏上，该卡片不会拉得太宽（中间对齐，宽度有限）。在中等屏幕上，该卡片也能正常显示，不被隐藏。

·       **导航衔接**：顶部主导航栏在PC端一直可见，含“仪表盘”、“任务规划”、“成长与奖励中心”等标签。点击顶部“成长与奖励中心”或底部卡片按钮，都能进入相同的新页面（验证路由一致性）。顶部导航的“成就广场”标签已不存在，侧边栏（若有）也无该项。

·       **兼容各尺寸**：介于移动和PC之间的设备（如iPad竖屏，宽≈768px）上，仪表盘不出现重复的导航元素。比如iPad上顶部导航栏出现且底部导航隐藏，而**快速操作卡片**由于 sm:block 在768px (md) 仍显示，需要确认不会导致导航项重复。根据设计，顶部导航已提供页面切换，理论上可以将快速操作卡片隐藏在md及以上屏幕（例如改为 hidden md:block -> 仅在中屏以上显示，这样640-767px区间不会重复显示顶部导航和卡片）。验收时应检查这一点：在宽度800px左右设备上，是否同时出现顶部菜单和底部卡片按钮（如果有，视为不影响功能但UI稍冗余）。理想状态是在≥768px时完全依赖顶部菜单导航，<768px依赖底栏，640-767px区间可能是个过渡态，需在验收标准中确认能接受或已经优化处理。

·       **性能和稳定**：删除不需要的组件后，页面加载更快，没有多余的接口请求（如以前加载DashboardStats时的一些本周统计，如已不需要，可确保后端不再提供或前端不请求）。功能上，添加/完成任务后积分更新、导航切换页面都一切正常，没有因为移除了某些组件而引发的错误。

## 4. 修复任务规划页面新建任务未即时显示的错误

### 目标

·       **确保任务即时可见**：当学生在“任务规划”页面中新建（规划）任务成功后，该任务应立即出现在当日任务清单中，无需手动刷新页面或重新进入。修复当前新建任务后列表不同步的bug，提升用户体验。

·       **消除状态不同步问题**：分析并修正可能的状态缓存或数据刷新逻辑问题，保证任务数据源更新后，UI 列表组件能获取到新数据。

### 修改文件/模块

·       任务规划页面组件：

·       frontend/src/pages/TaskPlanning.tsx 或 EnhancedTaskPlanning.tsx（取决于当前实际使用的组件名称）– 学生端任务规划主页面，包含任务库选择和今日任务列表。需在此处调整任务创建后的数据处理逻辑。

·       相关API服务：

o   frontend/src/services/api.ts 或 frontend/src/services/compatibleApi.ts – 使用了 apiService.createDailyTask 和 apiService.getDailyTasks 的接口实现[_[37]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L166-L175)[_[38]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L63-L72)。确认这些接口返回结果的处理，如有必要调整等待或返回值的使用。

·       前端状态管理：

o   frontend/src/utils/errorHandling.ts （useDataState 钩子）– 如果任务列表数据是通过自定义 hook 管理，需检查其 setData 是否正确调用。

o   任务列表组件（例如 EnhancedTaskPlanning 内部渲染“今日任务”部分，或 TodayTaskList 也可能被用在规划页）– 验证当数据源更新时，该组件能及时接收到新 props 并重绘列表。

·       （如有）后台接口：

·       后端 POST /daily-tasks 或相关创建任务的 API（在 backend/src/controllers/dailyTaskController.ts 中）– 不是前端文件，但可参考其逻辑确保前端对成功响应的处理正确。如果前端目前不等待响应完整就更新UI，可能需要调整。

### 开发要点

·       **Bug** **调查**：首先重现问题场景并分析原因：

·       当前实现中，学生在任务规划页选择若干任务并点击“规划任务”按钮后，调用 apiService.createDailyTask 将任务添加到选定日期[_[39]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L170-L178)。按代码逻辑，所有选中任务创建成功后，会调用 await loadDailyTasks() 重新从后端获取该日期的任务列表[_[40]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L180-L188)。理论上，这应更新前端状态并触发界面刷新显示新任务。

·       出现“新建任务未出现在清单”可能原因：

a.      **数据未及时刷新**：也许在任务创建API返回成功前就渲染了列表，或 loadDailyTasks 没有正确更新状态。检查 useEffect/useState 流程：是否因为使用 useDataState 自定义hook，状态更新滞后或被缓存？是否存在 eslint-disable 依赖导致useEffect不触发二次加载（但这里是手动调用，非依赖问题）？

b.      **选定日期不匹配**：创建任务时使用的日期 vs 列表加载使用的日期参数可能不一致。如果用户在规划页面选择了非当天日期selectedDate，createDailyTask传的日期和随后getDailyTasks用的selectedDate需匹配。确认 selectedDate 类型一致（字符串格式的 YYYY-MM-DD），无时区偏差。

c.      **状态未同步更新UI**：也许 loadDailyTasks 拉取新数据后没有正确 setState，或者 setState 后组件未重新渲染。例如，如果 dailyTasksState.setData(result) 内部并未改变引用（比如错误地直接修改原数组），React可能不会察觉变化。应该确保每次获取新列表都产生新数组对象。

d.      **组件未监听状态**：看看渲染任务列表使用的状态来源。如果页面用了 dailyTasksState.data 直接渲染，那么 setData 应该会引起组件刷新。如果用了 useRef 或其他缓存，可能没刷新。

·       通过调试Console或日志，在点击规划后打印 result 看看是否包含新任务，打印渲染时的任务数组长度，定位问题环节。

·       **解决方案**：

·       **确保刷新调用**：在任务创建循环完成后，一定要调用刷新函数并等待其完成。当前代码已用 await loadDailyTasks()[_[40]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L180-L188)。若发现其未执行，检查是否有逻辑分支跳过了它。例如如果选中任务为空则不会刷新，这不影响正常情况。可在 handlePlanTasks 末尾加一行保险起见：dailyTasksState.setLoading({ isLoading: false }) 或 dailyTasksState.setData([...])来强制刷新一次UI（一般不需，如果上一步成功）。

·       **即时更新UI**：为了更快反馈给用户，也可在收到 createDailyTask 单个任务成功返回时，就临时将该任务追加到前端列表，而不必等全部完成后统一刷新。比如：

    const newTask = { id: res.data.id, task: selectedTask, status: 'planned', ... };setDailyTasks(prev => [...prev, newTask]);

            这样用户立即看到任务出现为“未完成”状态。然后再调用加载以确保数据最终一致。此改进需确保不重复添加或与后续加载冲突。

·       **消除缓存**：如 useDataState 内部有缓存逻辑，可能导致重复请求被忽略。检查 withRetry 等逻辑[_[41]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L63-L71)是否在多次快速调用时有问题。可以在调试时禁止缓存或者在 createTask 后调用 loadDailyTasks 时加一个唯一参数（例如当前时间戳）避免命中缓存。

·       **更新依赖**：如果任务列表组件通过 useEffect 监听某依赖（如 selectedDate）去加载任务，那在任务创建后 selectedDate 未变则 useEffect不会再自动触发。我们通过手动调用已解决。如果不稳定，也可以考虑触发依赖更新，比如临时将 selectedDate 改成别的再改回来（不优雅，一般不需要）。

·       **前端渲染同步**：在 JSX 渲染部分，确认使用 state 而非初始常量渲染列表。如果一开始 dailyTasks 为空数组，然后 setData 更新但UI没变化，排查是否使用了类似 const [tasks, setTasks] = useState(dailyTasksState.data) 这种只取初始值的做法。正确做法应直接用 dailyTasksState.data 或每次都从 props取。若存在这种模式，应改用Effect同步或直接渲染 data。

·       **边界情况**：

·       若任务是在未来日期，则创建后当前选中日期列表其实不应显示（比如用户在任务库选了明天的日期然后规划，则今天列表不变，明天列表增加）。当前 UI 似乎选中了某天再规划，所以按 selectedDate 列表显示。确保这种逻辑正确：比如用户选择周四日期然后添加任务，selectedDate=周四，create成功后 loadDailyTasks(周四) 返回新任务，UI应当在“周四”视图看到新增任务。如果用户随后切换日期到今天，不应看到未来任务。这由接口按 date 过滤已保证，但最好测试一下不同日期。

·       同一任务模板避免重复添加：代码已有检查existingTask防重复[_[42]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L168-L176)。确保该逻辑还有效且不干扰刷新（不会因为已存在就不刷新列表）。

·       批量添加多个任务：若选了多项任务一起规划，应该全部出现在列表。当前实现循环调用 API 再统一刷新列表已经涵盖。测试当选5个任务规划后，列表一下增加5项是否正常顺序（API返回顺序不重要，我们最终刷新全部）。

·       **用户反馈**：

·       提交规划后会 alert("成功规划了 X 个任务！")[_[43]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L182-L185)。这个提示用户点击确认后，UI应该已经更新列表。如果修复成功，用户在关闭提示时就能在背景看到新任务已列出。

·       如果依然有短暂延迟，可以考虑在点击规划按钮后立即显示加载状态（比如禁用按钮并显示“规划中...”）[_[44]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L160-L168)[_[45]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L329-L337)，当前代码有 planningTask 状态控制按钮文案变化。确保这个 loading 状态持续直到刷新完成再解除。

·       修复完成后，alert弹出和列表更新应该是几乎同时或列表稍后（但用户体感应在1秒内出来）。验收时关注这个时序体验。

### 验收标准

·       **即时显示**：在“任务规划”页面（移动端或网页端均应测试），学生通过任务库选择一个新任务并点击“规划任务”后：

·       弹出“成功规划了1个任务！”提示的同时，今日任务列表中**立刻**出现了该新任务项。新任务默认状态为“未完成”（或“计划中”），正确显示标题、积分等信息。

·       如果一次性规划了多个任务（比如选中2个任务模板同时添加），提交后列表中新任务全部出现，数量与所选一致，内容正确无遗漏。

·       **无需刷新**：在不手动刷新浏览器、不离开页面的情况下，新任务就已经可见。验收人员不需要做任何其他操作，新任务就在当前列表里呈现。反之，如果需要刷新页面才能看到，则视为未通过。

·       **数据一致**：新任务显示后，其各属性（标题、日期、优先级等）与所选任务模板相符，且状态正确。例如，刚添加的任务应以“未完成”或“计划中”状态列出，积分为对应任务的基础积分。

·       **后端验证**：打开开发者网络面板确认，点击规划任务后，前端依次发出了选中任务的创建请求（POST /daily-tasks），并在完成后紧接着发送了一次获取任务列表请求（GET /daily-tasks?date=...）。后端响应成功，新任务包含在GET结果中。状态码皆200，无错误。若网络稍慢，在等待过程中“规划任务”按钮已变为“规划中...”禁用状态，避免重复点击。

·       **多日规划**：切换不同日期视图进行任务添加：

·       当用户切换到未来某日并添加任务，该任务不会出现在今天列表，而会出现在相应日期的列表下。通过切换日期查看，能够看到那天的新任务。比如当前周三，用户切换视图到周五日期添加任务，随后切换日期到周五时，新任务在周五列表中列出。

·       反之，在非选中日期添加任务的情况不会发生（因为UI不提供跨天添加界面）。因此上述逻辑基本满足，但还是检查selectedDate传递正确无误。

·       **界面稳定**：连续多次添加任务，列表持续增长，滚动正常，没有因为反复刷新导致的闪烁或卡顿感。也没有出现重复项（比如某任务被重复列出两次）或漏项（某次添加虽然成功但列表没显示）。

·       **代码健壮**：在任务规划页面不进行任何操作时，不会多余地调用刷新接口（避免性能浪费）。在离开页面或注销时不会因为未清状态造成警告。针对这个修复，重点关注控制台无新的报错，如 React 状态更新相关warning（例如内存泄漏等）。

·       **用户体验**：综合来说，学生在任务规划界面添加任务变得顺畅自然：点击一次按钮，马上收到成功提示并看到任务列表更新，对任务是否添加成功毫不怀疑。这样优化了之前任务添加“消失不见”的不良体验。

## 5. 移动端任务规划页面增加时间轴视图切换

### 目标

·       **丰富任务展示方式**：在移动端提供任务计划的**时间轴视图**，以直观的条形图方式呈现一天中任务的时间分布。让学生可以从时间维度审视当天安排，提升对计划的直观理解。

·       **交互切换**：实现列表视图和时间轴视图之间的切换按钮，允许用户在常规任务列表和时间轴图表间自由切换，满足不同偏好的查看方式。

### 修改文件/模块

·       任务规划页面组件（同任务4）：

·       frontend/src/pages/EnhancedTaskPlanning.tsx 等 – 在移动端渲染部分增加切换视图的UI控件和逻辑。

·       可选新组件：

o   新建 frontend/src/components/TaskTimeline.tsx（或类似命名） – 用于绘制时间轴条形图的组件，接受当日任务数据作为属性，在内部进行布局渲染。

·       任务数据类型：

o   frontend/src/types/index.ts – 查看 DailyTask 定义，确认是否有字段表示具体计划时间段（例如 plannedTime）可用来定位任务在时间轴上的位置。如果没有，则时间轴需根据任务顺序或预估时长来模拟。

·       样式：

o   如果时间轴需要滚动或特定样式，可能修改 frontend/src/styles/tailwind.css 或直接在组件中添加 Tailwind 实现。

o   引入图表库（可选）：本任务可用纯CSS绘制，若采用简单方案无需额外库。如要使用第三方图表库，请考虑体积和移动端性能，但本项目应尽量原生实现简易条图，无需重库。

### 开发要点

·       **UI** **切换按钮**：

·       在任务规划页界面增加一个切换视图的按钮，文案如“切换为时间轴视图”。此按钮在移动设备上可见（在PC上也可以出现，但主要意义在移动端）。

·       放置位置：可以在“今日任务”列表上方添加。例如在任务规划页面标题栏或日期选择栏附近加入：

    <button className="text-primary-600 text-sm underline" onClick={...}>切换为时间轴视图</button>

            这样按钮紧邻日期或列表标题，用户容易发现。也可放在列表底部，但顶部更直观。

·       按钮点击切换一个本地 state（如 viewMode）：当 viewMode 为 'timeline' 时显示时间轴组件，为 'list' 时显示常规任务列表组件。

·       实现双向切换：当处于时间轴视图时，按钮文字可变为“切换为列表视图”，点击可切回常规列表。可以使用同一个按钮在两种状态间切换文本和功能。

·       注意按钮样式在移动端要易点：可增大padding或使用悬浮固定按钮。如果放在顶部，也可考虑用一个Icon（如📊/📋）来暗示视图切换。

·       **时间轴视图布局**：

·       时间轴总体思路：X轴表示一天时间进程，Y轴列出任务项，每个任务以横向条形长度表示持续时间。在移动端，可能采用**纵向列表，横向条**的形式：

o   列表垂直排列每个任务，从上到下顺序即当天任务时间顺序（如有具体时间则按时间排序，没有则按任务顺序)。

o   每个任务一行，左侧显示时间点或任务名称，右侧一个水平Progress条表示时长。

·       **时间刻度**：如果任务有具体开始时间字段（plannedTime，比如“14:00”）[_[46]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L350-L358):

o   可以利用它决定条形的位置：例如采用CSS margin-left根据开始时间相对于一天的比例定位。

o   例如，一天从6:00开始作为0%，18:00结束作为100%宽度，那么14:00的任务条 margin-left ~ 66%（(14-6)/12）。

o   若没有具体时间，则假定任务按顺序排列连续。可简单将第一个任务从上午开始画起，后续任务紧接前一个结束绘制。虽然时间不真实，但至少体现先后顺序和大概持续时间。

·       **持续时间**：任务对象可能有预计时长字段，如 estimatedTime（分钟）[_[47]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L24-L32)。如果有：

o   用该值比例决定条形长度。例如设定一个比例：比如60分钟 = 25%宽度，那么estimatedTime越大条越长。

o   或者将最长任务估时作为100%长度基准，其它按比例。

o   若没有estimatedTime，可考虑统一长度，但那样时间轴就仅表示顺序没有意义。项目文档中提及任务难度/时长，所以应有这个值。

·       **绘制实现**：

o   可以使用CSS网格或Flex：外层容器设置相对定位或 grid 轨道表示时间。

o   简单方案：每个任务用一个容器 <div class="relative my-2">:

o   左侧一个时间标签 <span class="absolute left-0 text-xs text-gray-500">14:00</span>，表示开始时间（如果有）。

o   条形本身一个子div，如 <div class="ml-12 h-4 bg-primary-500 rounded" style={{width: '50%'}}></div>, 其中 ml-12留出左侧文字空间，width根据任务时长计算。

o   条形右侧可以加任务标题文字，或者条上居中写标题。考虑移动端宽度，标题长时可放条下方。

o   也可考虑将整个时间轴做一个水平滚动容器：即按时间比例排布任务块在横向空间，需要横向滚动查看全天。此方案较复杂但更贴合真实时间线。看需求允许“可静态或交互”，静态即可，不强求滚动交互。

o   我们可选择**静态简化**：以文字+条形的列表展示，不严格对应具体时刻，但体现持续时间长短差异和顺序。这样实现难度低，用户也能大致看出哪个任务耗时长。

·       **样式细节**：

o   使用柔和的配色：可沿用Tailwind的 primary/secondary 配色。比如所有条形使用 bg-primary-400，或者根据任务类别配色不同（锻炼任务蓝色、学习任务绿色等）增强辨识度。

o   条形高度在移动端不用太粗，例如4px~8px即可，看手机屏幕适配。圆角边让条更美观。

o   确保文字可读：如果在条内部显示文字，要对比色；如果在外部，则留足空间。

o   给时间轴容器加上 overflow-x: auto（Tailwind overflow-auto）属性，如果采用真实时间比例布局且总长度超出屏幕宽度，可以横向滚动查看全局。

o   若无滚动，条形最长也不会超过屏幕边界（可设max width 100%）。

o   在不同屏幕宽度测试，条形不会超出容器。

·       **数据更新**：

·       切换到时间轴视图后，任务数据源仍然是当日任务列表。当用户在时间轴视图下如果新增或删除任务（理论上在规划页不会删除任务，只添加），也要考虑刷新：

o   最好当任务列表数据 dailyTasks 改变时，同时触发重新渲染时间轴。即时间轴组件从 props 接收任务数组，React会自动更新。无需特殊处理。

o   切换视图不会重置任务数据，仅改变展示方式，所以 state 存储任务列表留在父组件，不放在Timeline组件内部。

·       **性能考虑**：

·       一天任务量不会太多（一般十几个以内），绘制条形DOM不会有性能问题。可放心在切换时重新渲染。

·       切换按钮事件应切换 state，React会卸载列表组件挂载时间轴组件或相反，确保没有内存泄露。可以使用 React Developer Tools 验证切换几次后组件数量正常。

·       **文档指引**（对用户非必需，但可以在UI上给出简单提示）：

·       可在时间轴视图的顶部加一句注释小字：“时间轴视图根据任务预估时长展示，如需调整顺序请长按拖动”（如果将来支持拖拽排序的话）。当前不实现交互拖动，只是静态展示，所以不用说明拖动。但可以提示“每个横条长度与任务预计用时成比例，仅供参考”之类。

### 验收标准

·       **视图切换按钮**：在任务规划页面（移动端界面）看到**“切换为时间轴视图”**按钮。按钮样式明显易点（文字有下划线或按钮样式）。点击后，页面无刷新跳转，而是在同一页面内容区域切换展示模式。再次点击（此时文案应变为“切换为列表视图”）则能切回普通任务列表。反复切换多次，功能正常，没有卡顿或崩溃。

·       **时间轴视图显示**：切换到时间轴模式后：

·       页面中出现一天任务的时间轴图表。所有当日任务**各占一行**垂直排列，从上到下顺序合理（如按照任务开始时间或添加次序）。如果任务有具体时间，顺序应按时间早晚；如果无，则沿用列表顺序。

·       每个任务行都有一条水平彩色条带表示该任务预计持续时间。条带长度相对比较：

o   **长任务**（预计耗时长）对应的条明显长于**短任务**对应的条。验收时，如有一个任务estimatedTime为60分钟，另一个为30分钟，则前者条形大约是后者的两倍长度（具体比例无需非常严格，但肉眼可辨长短）。

o   没有任务的条超出屏幕右边界。若某任务非常长，所有条可能相对较短，但整体都在屏幕范围内；或整个轴可以横向拖动查看。总之不会出现看不到条末端的情况。

·       每条左侧或者条内部，有任务名称/简称标识，方便识别哪条对应哪个任务。验收人员应能通过阅读看到每条相关的任务标题或图标。比如任务“A 数学作业 30min”显示一条带有标签“数学作业 30min”的条。

·       （如果实现了时间刻度）时间轴有刻度或起止时间标记：例如顶部可能标注“08:00 —— 20:00”之类，如果做了更精细刻度，则每隔2小时一个标记。这个不是硬性要求，但如有设计会加分。

·       **移动端适配**：在手机上显示时间轴视图，各元素大小适中：

·       纵向滚动：如果任务很多导致时间轴整体超出屏幕高度，可以垂直滚动查看后面的任务行。

·       横向滚动（如适用）：如果实现真实时间比例且全天跨度很长，则容器支持横向滑动查看整条时间线。例如清晨6点到夜晚10点任务都安排满时，可以左右拖动看到左右两端。滑动平滑，没有布局错乱。

·       条形和文字没有明显对齐问题。多个任务行彼此平行，开始时间对齐（如有刻度线可以对齐在同一纵线）。没有出现文字遮盖条形或者条形重叠等bug。

·       **功能一致性**：切换到时间轴视图后，**添加新任务**依然可用（测试：在时间轴视图模式下，使用任务库选任务规划，规划成功后：

·       新任务会立即反映在时间轴视图中，多出一条新的任务条，位置和长度正确。比如规划了一个10min的小任务，由于短，时间轴上应出现一个很短的条可能靠后（如果按开始时间排，会插入相应顺序）。

·       同时如果切回列表视图，新任务也在列表中可见，保持同步）。

·       若有交互要求，长按或点击时间轴上的任务条不做任何异常（当前未实现复杂交互，仅展示，因此点击可以无效果或简单提示）。

·       **性能流畅**：切换视图不会引起明显延迟或掉帧。任务数量在常规范围（<20）时，时间轴渲染迅速。验收时反复点击切换5次以上，页面依然响应良好，无内存泄漏警告。

·       **界面美观**：时间轴视图的风格与应用整体协调。采用了Tailwind默认的圆角、配色等，不会显得像另一个应用。文字清晰、对比度足够。背景可以沿用页面默认渐变背景或纯白，条形色彩与之搭配良好。整体看上去简洁直观，让用户一目了然一天的任务安排长短情况。

·       **文档提示**：如果实现中给出了任何提示文字（例如“时间轴视图为静态展示，时长比例仅供参考”），核对其措辞是否正确且在小屏幕下没有挡住主要内容。该项没有则不强求。

完成以上各项后，所有新功能和调整均应通过测试，确保兼容不同设备尺寸，满足需求。所有任务的实现应遵循项目既有的设计体系，移动端体验良好，达到产品预期。

---

[_[1]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L826-L835) [_[2]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L832-L840) [_[10]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L802-L810) [_[11]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L790-L798) [_[12]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L12-L20) [_[13]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L20-L28) [_[14]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L30-L39) [_[15]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html#L62-L71) Rewards.tsx.html

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/coverage/lcov-report/src/pages/Rewards.tsx.html)

[_[3]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/backend/src/controllers/redemptionController.ts.bak#L60-L99) redemptionController.ts.bak

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/backend/src/controllers/redemptionController.ts.bak_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/backend/src/controllers/redemptionController.ts.bak)

[_[4]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/Layout.tsx#L50-L58) [_[25]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/Layout.tsx#L84-L93) Layout.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/Layout.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/Layout.tsx)

[_[5]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx#L50-L58) [_[23]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx#L37-L45) [_[24]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx#L50-L59) [_[31]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx#L84-L92) BottomNav.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/BottomNav.tsx)

[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L418-L427) [_[7]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L434-L440) [_[19]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L375-L383) [_[20]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L393-L401) [_[26]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L264-L273) [_[28]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L10-L14) [_[29]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L444-L447) [_[32]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L372-L380) [_[33]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L404-L413) [_[34]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L408-L416) [_[36]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx#L406-L414) Dashboard.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/Dashboard.tsx)

[_[8]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/PointsHistory.tsx#L273-L282) [_[9]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/PointsHistory.tsx#L287-L296) PointsHistory.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/PointsHistory.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/PointsHistory.tsx)

[_[16]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L36-L44) [_[17]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L53-L61) [_[18]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L54-L62) [_[27]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx#L48-L51) WelcomeBanner.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/WelcomeBanner.tsx)

[_[21]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L147-L156) [_[22]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L160-L168) [_[30]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L79-L87) [_[35]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx#L90-L98) TodayTaskList.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/components/dashboard/TodayTaskList.tsx)

[_[37]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L166-L175) [_[38]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L63-L72) [_[39]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L170-L178) [_[40]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L180-L188) [_[41]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L63-L71) [_[42]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L168-L176) [_[43]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L182-L185) [_[44]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L160-L168) [_[45]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L329-L337) [_[46]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L350-L358) [_[47]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx#L24-L32) EnhancedTaskPlanning.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/0d67d65567fe1be080637a6cac0dd3a0bccaaf96/frontend/src/pages/EnhancedTaskPlanning.tsx)