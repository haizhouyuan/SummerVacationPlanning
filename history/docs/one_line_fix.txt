一键修复SSH配置命令（复制到Linux服务器执行）：

# 完整的一键修复命令（复制整行到Linux服务器执行）：
cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak_$(date +%Y%m%d_%H%M%S) && sed -i 's/^#*PubkeyAuthentication.*/PubkeyAuthentication yes/' /etc/ssh/sshd_config && sed -i 's/^#*PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config && sed -i 's/^#*PasswordAuthentication.*/PasswordAuthentication yes/' /etc/ssh/sshd_config && mkdir -p /root/.ssh && touch /root/.ssh/authorized_keys && chmod 700 /root/.ssh && chmod 600 /root/.ssh/authorized_keys && chown -R root:root /root/.ssh && sshd -t && systemctl restart sshd && echo "SSH配置修复完成！" && systemctl status sshd

分步执行命令（推荐，更安全）：

# 1. 备份配置
cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak_$(date +%Y%m%d_%H%M%S)

# 2. 启用密钥认证
sed -i 's/^#*PubkeyAuthentication.*/PubkeyAuthentication yes/' /etc/ssh/sshd_config

# 3. 允许root登录
sed -i 's/^#*PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config

# 4. 启用密码认证
sed -i 's/^#*PasswordAuthentication.*/PasswordAuthentication yes/' /etc/ssh/sshd_config

# 5. 创建SSH目录
mkdir -p /root/.ssh

# 6. 创建密钥文件
touch /root/.ssh/authorized_keys

# 7. 设置权限
chmod 700 /root/.ssh
chmod 600 /root/.ssh/authorized_keys
chown -R root:root /root/.ssh

# 8. 验证配置
sshd -t

# 9. 重启SSH服务
systemctl restart sshd

# 10. 检查状态
systemctl status sshd

测试连接命令：
ssh -i /path/to/your/private_key.pem root@YOUR_SERVER_IP 