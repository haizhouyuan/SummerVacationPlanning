荣誉系统删除与成长奖励中心页面重构规划

后端

删除荣誉（成就/勋章）相关的控制器、服务和模型。例如，如果有 AchievementController、AchievementService、AchievementStats 或 Badge 模型，应全部移除；同时清除积分规则（PointsRule）中与勋章倍数相关的逻辑。用户模型（Users）中与荣誉系统相关的字段也要删除：例如记录连续打卡天数的 currentStreak、以及记录各级勋章状态的 medals（青铜/白银/黄金/钻石）字段。这些字段用于表示里程碑成就，删除后要确保积分计算逻辑中去除对它们的依赖。

删除用于“荣誉系统”的数据库集合。如有专门统计成就的集合（例如 achievementStats）或徽章存储，则彻底删除。若系统中有“等级”相关逻辑，也应删除对应模型/字段。

同时，后端需要新增“奖励”相关接口：设计新的 Rewards 数据模型和对应的控制器，用于管理可兑换的特殊奖励项。前端提交兑换时通过奖励ID引用该集合。游戏时间兑换部分相关接口可保留并整合到新的“奖励中心”逻辑中。所有剩余的业务逻辑（打卡、积分累加、兑换审批等）仍然保留并继续使用现有的任务控制器 DailyTaskController、积分交易 PointsTransaction 记录等，只需剔除与荣誉挂钩的功能即可。

（引用自项目文档，指出用户文档中的 currentStreak 和 medals 字段以及引入独立奖励模板集合的建议）

前端

删除荣誉相关页面和组件：例如 AchievementSquare.tsx（“成就广场”页面）及其关联组件（如 AchievementBadge.tsx、任务完成徽章展示等）应移除。原先任何展示勋章或成就的组件均不再使用，应在路由和菜单中删除“成就广场”入口。

移除或重构仪表盘和导航中的荣誉入口：例如学生主页上的“成就广场”按钮需要删除，同时若有与荣誉相关的展示（如“成就徽章”区域、连续打卡勋章图标等）也应移除。导航栏中若有荣誉/成就栏目，一并去除。

对应替换为“成长与奖励中心”页面：保留原“奖励中心”或新建该页面，将其更新为包括新兑换功能和历史记录。若原有代码中已有 RewardsCenter.tsx（奖励中心）页面，可在此基础上重构；否则新建一个页面组件，并在路由表中加入。

数据库字段清理

对不再使用的字段执行清理：确认删除 Users 文档中的 currentStreak 和 medals 字段，并移除任何PointsRule.multiplier.medal相关配置。原则上可进行模式级删除，直接在数据库层面物理移除相关字段，因为这些数据只用于荣誉显示，移除后也无副作用。为了安全，可先在代码中对这些字段进行软删除（暂时忽略），并备份所有相关数据。

若担心影响，可先创建数据库备份。例如导出所有用户文档和任务数据，尤其保留积分和原勋章记录，以便出问题时回滚。对于兑换记录 (Redemptions) 和积分交易 (PointsTransaction) 应继续保留，只是在新逻辑下审查核对积分扣减。应确保游戏时间兑换后能够生成相应的积分交易记录，保证积分账目完整（见数据分析建议：游戏时间兑换也应写入一条交易日志）。

如果之前没有专门的“奖励模板”集合（Rewards），可以新建集合来存放固定的奖励项（如标题、描述、所需积分）。这样历史兑换记录仍然保留原有快照字段，但未来操作参考统一的Rewards集合。

UI 页面重构

图：学生仪表盘示例（包含原“成就广场”按钮）。在重构后，此处的成就模块应替换为“成长与奖励中心”相关内容。

积分概览：页面顶部或显眼位置显示当前用户总积分，旁边可选配近7日积分趋势图表，供学生查看近期积分变化。

奖励兑换区域：设置两个兑换板块：

游戏时间兑换：输入要兑换的积分数或直接选择兑换时长，显示兑换所需积分和可获得的分钟数，并提交兑换请求。

特殊奖励兑换：展示从后端 Rewards 集合加载的奖励选项列表（包括名称、描述、所需积分）。用户选择奖励后扣减积分并记录兑换请求。

历史记录区域：划分为两部分：

任务完成记录：列出近期完成的任务及对应获得积分，比如表格或时间轴格式，包括任务名、完成时间和积分。

兑换历史记录：列出过去所有兑换（包含游戏时间和特殊奖励），显示兑换时间、消耗积分和兑换内容、处理状态等。

响应式布局：支持移动端单列展示和桌面端双栏布局。在小屏设备上各区域依次纵向排列；在大屏时可将“积分概览”与“奖励兑换”区域并排显示，历史记录区域下方分两列呈现任务与兑换历史。

代码依赖重构

删除或合并组件：移除所有与成就/徽章相关的组件（如 AchievementBadge、AchievementList 等）。对于积分进度条或其他可复用组件，评估是否仍需要：例如用于显示任务完成度的进度条可以保留并在新页面中复用；而纯展示勋章的视觉组件则可删除。

复用组件改造：如果已有组件（如积分条、图表组件）可用于新功能，应重命名或注释掉与旧荣誉系统关联的逻辑。比如“每日积分进度条”若之前服务于徽章升级，可改用来显示兑换进度或任务目标完成度。

导航和状态管理：更新路由和导航名称，将原指向成就的路由改为新页面，更新相应的 Redux/Context 状态（如将 showAchievements 改为 showRewardsCenter）。确保删除荣誉后不再在前端存储任何 medal/streak 状态。

测试与回滚机制

功能测试：针对现有流程（登录、每日任务打卡、家长审核、积分累计等）进行回归测试，确保剔除荣誉功能后原流程不受影响。重点验证任务完成后积分是否正常加、拒绝后是否正确扣分（若调整逻辑）；兑换流程下积分扣减是否准确（包括游戏时间和特殊奖励）。编写自动化测试覆盖兑换和历史查询等新功能。

界面测试：检查“成长与奖励中心”在不同分辨率下布局是否正常，各功能板块是否可交互；移除的成就相关按钮是否不再出现。

回滚策略：上线前备份数据库中所有用户的原荣誉数据字段（currentStreak、medals 等）以及兑换记录。可以先在测试环境尝试清理字段，确认系统运行正常再推到生产。若上线后发现严重问题，可将备份数据恢复到相应字段，或暂时恢复相关代码。建议使用数据库的导出/导入功能或者将相关集合导出为 JSON 以备紧急回滚。

上述步骤完成后，系统将不再包含荣誉勋章逻辑，而是以积分兑换为核心驱动新功能，确保“成长与奖励中心”页面既满足兑换需求，又能无缝兼容原有任务积分流程。 (以上参考项目内部设计文档和建议)