# 家长端 MVP 开发计划

## 功能模块划分

·         **家长仪表盘（Dashboard****）：** 家长登录后看到的主界面。用于汇总展示每个孩子的任务完成情况、积分和奖励概览等信息，支持在多个孩子之间切换查看。

·         **任务审批模块：** 家长查看并审核孩子提交的任务证据，决定批准或驳回任务完成申请。包括待审批任务列表和具体审批操作界面。

·         **积分与奖励管理模块：** 家长管理孩子的积分及奖励兑换请求。功能包括查看孩子当前积分、审核孩子提交的积分兑换奖励请求（批准兑换或拒绝并返还积分），以及查看积分变动记录等。

·         **家庭成员管理（账户设置）：** 家长管理家庭账号关系的功能，如添加/邀请孩子账户、查看已关联的孩子列表等。此模块在MVP中可作为仪表盘中的子功能（如弹窗），主要用于将孩子账户与家长关联，支持“爸爸”和“妈妈”两个家长角色绑定同一孩子。

**说明：** 当前代码库中已有家长仪表盘和任务审批的早期实现组件，可在本次MVP中加以复用评估[_[1]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L170-L178)[_[2]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L179-L185)。若现有实现无法满足要求，再考虑从零开始实现相关功能；积分/奖励管理部分若无现成代码则需要从头开发。

## 各页面设计与逻辑

### 家长仪表盘

**组件布局：** 家长仪表盘页面主要包括：导航头部、孩子选择器、概览统计卡片、任务列表摘要等组件。 - **头部栏：** 显示家长端标题“家长控制台”及简要说明[_[1]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L170-L178)，右侧显示家长用户名称和“退出登录”按钮[_[3]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L194-L202)。头部还包含“任务审批”按钮（带待审批数量徽章)和“家庭管理”按钮[_[4]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L178-L186)供家长快速进入相应功能。 - **孩子选择器：** 若家长名下有多个孩子账户，提供选择切换孩子的界面。以卡片或下拉列表形式展示孩子姓名、头像/图标、当前积分及等级等简要信息[_[5]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L260-L268)。默认自动选中第一个孩子[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L66-L74)，切换选中不同孩子时，页面随之更新显示相应数据。 - **孩子概览卡片：** 展示所选孩子的总体信息，包括昵称、当前积分（PointsDisplay组件显示积分)和等级、累计完成任务数量等[_[7]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L263-L271)[_[8]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L284-L293)。采用卡片式样，与学生端风格一致。 - **周进度卡片：** 显示孩子本周任务完成进度（已完成/计划中/跳过）和目标达成率。使用进度条组件和统计数字来直观展示[_[9]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L298-L307)[_[10]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L308-L316)。 - **连续学习天数（Streak****）：** 以🔥图标和计数显示孩子连续完成任务的天数，以及简易日历格表示连续打卡情况[_[11]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L323-L332)[_[12]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L333-L341)。 - **分类任务统计：** 按任务类别统计孩子完成的任务数量列表，比如阅读📚、运动🏃‍♂️等类别及对应完成次数[_[13]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L350-L358)[_[14]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L359-L364)。 - **近期任务列表：** 列出所选时间范围（今日/本周/本月）的任务清单及完成状态[_[15]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L393-L401)[_[16]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L402-L410)。因是概览页，此处任务列表以只读方式呈现（不提供操作按钮）。 - **成就徽章：** 显示孩子已解锁的成就徽章网格，激励孩子持续完成任务[_[17]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L416-L424)[_[18]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L425-L433)。 - **家庭排行榜：** 展示家庭内部积分排行榜组件，比较同一家庭各成员的积分情况（如孩子之间，或孩子与家长）[_[19]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L434-L436)。

**显示逻辑：**- 家长登录后进入仪表盘时，通过API加载其名下孩子列表及每个孩子的统计数据[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L66-L74)[_[20]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L78-L86)。若无任何孩子账户，仪表盘显示空状态提示，鼓励家长创建孩子账户[_[21]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L228-L237)。- 默认选中第一个孩子并显示其数据；如果家长切换选择其他孩子，页面中心的各统计组件应随之更新为所选孩子的信息。加载数据过程中显示加载动画或骨架屏，加载失败则显示错误提示及重试按钮[_[22]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L211-L219)。- 页面只允许家长角色访问，若非家长用户（如学生账户）尝试访问，则显示“访问受限”的提示信息[_[23]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L146-L155)并阻止进入。

**操作逻辑：**- 家长可点击头部的“任务审批✅”按钮，导航进入任务审批页面（或打开审批面板）[_[24]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L178-L185)。按钮上方的通知徽章会显示当前待审批任务数量[_[24]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L178-L185)，提示家长有多少任务待处理。- 点击“家庭管理👨‍👩‍👧‍👦”按钮，弹出家庭成员管理窗口。家长可在此添加孩子账号（跳转注册或发送邀请）、查看家庭成员状态等。此模块用于维护孩子与家长的关联关系，MVP中可简单实现为输入孩子信息创建账户或邀请链接。- 在孩子概览区，家长可以切换不同的时间筛选（今日/本周/本月）来刷新任务列表和统计数据[_[25]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L368-L376)[_[26]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L377-L385)。切换时调用不同的统计API或前端过滤数据。- 界面整体采用与学生端一致的卡通主题和配色，但布局和元素相对简洁，突出数据概览。采用响应式设计，优先适配移动端375x667屏幕，在小屏幕上各组件以单栏顺序排列，在较大屏幕上则多栏布局以充分利用空间。确保文字和图表在移动端清晰可读，可通过Tailwind CSS的内置响应类实现。

### 任务审批页面

**组件布局：** 任务审批页让家长批量查看并处理孩子提交的任务证据，主要包括：页头、待审任务统计卡片、快速审批入口、审批指南，以及具体审批工作流对话框等。 - **页头：** 显示页面标题“✅ 任务审批”及待审批任务数量徽章[_[27]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L52-L60)。提供刷新按钮和“打开审批面板”按钮[_[28]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L60-L68)[_[29]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L69-L73)。刷新按钮用于重新获取最新的待审批任务数据；审批面板按钮用于进入任务审批工作流。页头下方一行文字提示家长在此页面可以审核孩子提交的任务证据[_[30]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L54-L59)。- **待审批统计卡片：** 在页头下方，以卡片形式突出显示当前“待审批任务”数量[_[31]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L98-L106)。例如一个卡片中用⏳图标和橙色数字显示“X个任务等待审核”。如果有其他统计（比如已通过、已拒绝数量），也可并列展示类似卡片。- **快速审批卡片：** 提供直接进入审批流程的入口[_[32]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L108-L116)。包含提示文字如“快速审核孩子提交的任务”以及一个“开始审批”的按钮[_[33]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L116-L120)，点击按钮相当于打开审批对话框。- **审批指南/****提示：** 以卡片形式列出一些审核任务的建议和标准，如✅通过标准和❌拒绝情况列表，帮助家长把握审核尺度[_[34]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L168-L176)[_[35]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L180-L188)。这部分内容静态显示，指导家长合理审批。- **审批工作流对话框：** 点击“打开审批面板”或“开始审批”后，弹出任务审批工作流组件（模态窗口）[_[36]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L192-L200)。对话框中依次展示每个待审批任务的详情：包括任务名称、孩子提交的文字或图片/视频证据、提交时间等，以及“通过”或“拒绝”按钮和可选的备注输入框、额外奖励积分输入。家长可逐项审核：选择通过则任务标记为完成并可给予额外奖励积分，选择拒绝则任务保持未完成状态并可填写反馈原因。对话框支持一次审批一个任务，处理完一个后自动显示下一个；也可批量操作或关闭对话框。

**显示逻辑：**- 页面加载时调用API获取当前所有待家长审核的任务列表及数量（按家庭获取）[_[37]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/frontend/src/services/api.ts#L228-L235)[_[38]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/frontend/src/services/api.ts#L229-L237)。若有数据加载错误则显示错误提示和重试按钮[_[39]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L78-L86)。- 徽章和待审任务计数实时反映待审批任务的数量[_[40]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L54-L60)[_[31]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L98-L106)。当家长在审批对话框中处理任务后，计数应及时更新（通过在对话框关闭时重新拉取数据或前端状态更新）。- 如无任何待审批任务，页面应明确显示0或相应的“暂无待审批任务”的提示，快速审批卡片的按钮可置灰或提示无任务可审。- 审批对话框在打开时加载当前待审核任务详情列表（或已在页面加载时获取）。若任务列表较多，可在对话框内支持滚动或分页。对话框需支持在移动端全屏显示，以便小屏幕下方便操作。

**操作逻辑：**- 家长点击“刷新🔄”按钮，重新调用待审批任务列表API，更新页面统计和列表[_[28]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L60-L68)。在加载过程中按钮应disabled状态并显示“刷新中...”字样[_[41]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L62-L70)。- 点击“开始审批”或页头的“打开审批面板”按钮，会打开任务审批对话框（TaskApprovalWorkflow组件）[_[29]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L69-L73)[_[36]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L192-L200)。家长在对话框内可以浏览每个任务的详情和证据，选择“通过✅”或“拒绝❌”。- 当家长点击“通过”时，前端调用任务审批接口将该任务标记为已批准（可携带备注和奖励积分）。若提供了额外积分，后端将把这些积分加给孩子的账户。点击“拒绝”则调用接口将任务标记为被拒绝，可以附加拒绝原因。每次操作成功后，对话框自动加载下一个待审任务；如果已无更多待审任务，对话框关闭并返回主页面。- 家长完成所有审批后，待审批计数应归零，通知徽章也同步更新。此时页面可提示“所有任务均已审核”并引导返回仪表盘或保持空列表状态。- 任务审批完成后，被批准的任务会在孩子端显示为已完成并增加相应积分；被拒绝的任务在孩子端可能显示为被退回状态，孩子可以修改后重新提交。家长审批操作也应记录进数据库日志以备查询。- **移动端适配：** 审批对话框在移动端应全屏覆盖，并将操作按钮置于底部固定，以方便点击。审核证据（如照片/视频）在小屏幕上可点按放大查看。确保家长可以在手机上顺畅地逐个审批任务。

### 积分与奖励管理页面

**组件布局：** 该页面让家长查看孩子的积分情况并处理积分兑换奖励的请求，包括：页头、积分概览、兑换请求列表、以及积分明细查看等部分。 - **页头：** 显示模块标题，如“🎁 积分与奖励管理”，下方可附一句描述如“管理孩子的积分奖励兑换”以提示功能。页头右侧可放置孩子当前可用积分数的简要显示，以及可能的刷新按钮。若支持多孩子切换，也应在此提供孩子选择功能（或复用仪表盘的选择器）。- **积分概览/****统计：** 显示所选孩子的积分概况，例如当前总积分、累计获得积分总额、已花费积分总额等。可以使用小面板或卡片列出“当前积分”、“累计获得”、“累计消耗”、“净积分”等数据，直观反映孩子的积分使用情况。- **待审批兑换请求列表：** 以列表或卡片形式列出孩子发起的奖励兑换请求，尤其是**待家长审批**的项目。每项内容包括奖励名称/描述、所需积分、请求时间，以及当前状态（待审批/已批准/已拒绝）。对于待审批状态的请求，在列表项上提供“批准”和“拒绝”两个操作按钮。已处理过的请求可显示状态但不提供操作按钮。- **兑换请求详情对话框（可选）：** 若列表信息较简略，家长点击某个兑换请求项可弹出详情窗口，显示该奖励的详细描述、孩子留言（如有）等，并再次提供批准/拒绝操作接口。简单起见，MVP也可直接在列表项上进行操作而无需单独对话框。- **积分历史记录：** 提供查看孩子积分变动明细的入口，例如一个“查看积分记录”按钮或超链接。点击后可打开模态窗口（复用现有PointsHistory组件）显示按时间排序的积分获取和花费记录[_[42]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L156-L164)[_[43]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L170-L178)。记录包括每笔积分变动的时间、类型（获得/消耗）、数量、来源（如任务完成获得或兑换花费）等，让家长清晰了解积分流动情况。

**显示逻辑：**- 页面加载时，通过API获取孩子的当前积分余额及历史统计（累计获得/消费等），以及所有**待审批**的奖励兑换请求列表[_[44]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L363-L371)[_[45]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L372-L380)。如果孩子当前没有待审批请求，列表区域可显示“暂无兑换请求等待审核”的提示。- 如果有待审批的兑换请求，在页面或导航上也应醒目提示数量。比如可以在模块标题旁或某个图标上加上红点或数字提示家长有多少兑换待处理。- 批准或拒绝操作应实时反馈：当家长对某个兑换请求做出处理后，该项应从“待审批”列表移除或状态更新为已处理，并相应地更新孩子的积分余额（如果拒绝则积分返还）[_[46]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L234-L242)。可以在操作完成后自动刷新列表和积分显示，或者在前端预先更新状态以提高响应速度。- 对于已批准的请求，可在UI上区分标识（例如灰掉“批准”按钮并标记为“已批准”，但保持在列表中一段时间供家长查看；或者直接从待审批列表移除）。对于已拒绝的请求同理标记为“已拒绝”，并将返还积分的情况告知家长。- 若支持多孩子，切换孩子时应重新加载该孩子的积分及兑换请求数据。MVP中也可简化为每次仅查看单个孩子（例如通过仪表盘进入时已锁定某孩子）。

**操作逻辑：**- 家长点击“批准”兑换请求按钮时，调用后端奖励兑换审批接口将该请求状态更新为approved[_[47]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L32-L40)。后端在批准时不会退款，因为兑换所需积分在孩子提交请求时已冻结扣除[_[48]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L51-L59)[_[49]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L53-L61)。前端可提示“已批准，您可以为孩子兑现该奖励了”，并从待审批列表中移除该请求。- 家长点击“拒绝”按钮时，调用接口将请求状态更新为rejected[_[50]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L34-L40)。后端在拒绝时会将冻结的积分返还给孩子账户[_[51]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L182-L190)[_[52]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L239-L242)。前端可提示“已拒绝，积分已返还给孩子”，并更新孩子当前积分显示。家长可在必要时填写拒绝原因备注供孩子查看。- 家长点击某条兑换请求项，可查看详情（如果实现了详情对话框）。在详情中也可以进行批准/拒绝操作，结果与在列表直接操作一致。- 点击“查看积分记录”按钮，前端调用积分历史接口获取该孩子近期的积分获取和花费记录，并弹出模态窗口显示[_[53]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L158-L166)[_[54]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L173-L180)。家长可筛选时间范围（如查看本周、本月或全部记录）以及按获取/支出类型过滤。此功能帮助家长了解孩子积分从何而来，用在何处，提高透明度。- **移动端适配：** 积分管理页面在手机上应简化布局，例如积分概览和兑换列表以垂直堆叠方式展现。兑换请求的操作按钮应足够大且易于点击。对于长列表，确保滚动流畅，并固定页头以方便切换孩子或返回上一页。积分详情对话框在移动端可全屏显示，提供返回关闭按钮。

## 后端接口需求

家长端功能涉及的主要后端API接口包括： - **获取孩子列表：** GET /auth/children – 家长获取其名下所有孩子账号的基本信息列表，用于仪表盘孩子选择器加载[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L66-L74)。返回孩子的ID、姓名、邮箱、当前积分、等级等。- **获取孩子统计：** GET /auth/children/{childId}/stats – 获取指定孩子的任务完成情况统计数据，用于家长仪表盘展示孩子进度和成就[_[20]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L78-L86)。返回如每日任务列表、本周统计（completed/planned/skipped）、分类任务计数、成就列表等数据。- **获取待审批任务：** GET /daily-tasks/pending-approval – 家长查询所有孩子的待审核任务列表。返回尚未审核的每日任务条目（包含任务ID、标题、提交证据摘要、孩子姓名等）。家长任务审批页需要此接口来列出待处理的任务。- **任务审批操作：** PUT /daily-tasks/{dailyTaskId}/approve – 家长审批任务接口，通常在请求体提交action: 'approve'或'reject'以及可选的approvalNotes（审核意见）和bonusPoints（奖励积分）。后端根据action更新对应DailyTask的approvalStatus、approvedBy等字段，并在通过时增加积分/在拒绝时不变[_[55]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L90-L98)。此接口供前端在任务审批对话框中调用，完成单个任务的审核动作。- **获取待审批兑换请求：** GET /redemptions/pending – 家长获取其孩子所有“待审批”的积分兑换奖励请求列表[_[47]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L32-L40)。返回每个请求的详细信息，包括兑换内容、消耗积分、请求时间等，以及请求者（孩子）的姓名/ID[_[45]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L372-L380)。积分与奖励管理页需要用此接口填充待审批列表。- **兑换审批操作：** PUT /redemptions/{redemptionId} – 家长审批兑换请求接口。请求体提供新的status（approved或rejected）及可选备注notes，后端将对应Redemption记录状态更新，并执行积分扣除/退还逻辑[_[51]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L182-L190)[_[46]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L234-L242)。家长点击批准或拒绝兑换时调用该接口。- **获取积分变更记录：** GET /auth/points-history – 获取指定孩子一定时间范围内的积分获取/使用明细。用于家长查看积分历史。可接受查询参数指定起止日期或类型筛选，返回按时间排序的记录列表（每条包含日期、类型（earn/spend）、积分数量、来源描述等）供前端展示[_[42]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L156-L164)[_[43]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L170-L178)。  
- _(__可选)_ **获取家庭排行榜：** GET /auth/family-leaderboard – 获取家庭成员间积分排行数据，用于仪表盘家庭排行榜组件。返回家庭所有用户（家长和孩子）的名称及积分，用于前端排序显示。

以上接口大部分项目已有初步实现。例如/auth/children和任务审批接口已在后端实现并用于现有功能[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L66-L74)[_[56]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/frontend/src/services/api.ts#L228-L237)；/redemptions相关的创建和审核接口也已存在[_[47]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L32-L40)。开发中应复用并完善这些接口，如必要可扩展返回数据字段（例如在待审批兑换列表中直接包含孩子姓名，方便前端展示[_[45]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L372-L380)）。确保接口验证权限：只有家长用户能访问自己的孩子数据、审批其任务和兑换请求，不能越权访问他人数据。

## 初期数据库结构及字段调整建议

·         **用户与家庭关系：** 在用户表(users集合)中，利用现有字段实现家长-孩子关联关系。当前设计有parentId（孩子记录上指向家长）和children数组（家长记录上包含孩子ID列表）字段[_[57]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L3-L10)。建议继续使用这些字段将家长账号与孩子账号关联起来。鉴于只支持“爸爸”和“妈妈”两种家长角色，每个孩子账号最多允许关联两个家长用户。可以通过在两个家长用户的children列表都加入该孩子ID来实现双亲关联，同时在孩子记录上保存两个家长的引用。必要时可在孩子用户模型中将单个parentId扩展为parents数组，以存储多个家长ID（或增加一个secondaryParentId字段）。这确保了一个孩子可以被两个家长账户所管理。

·         **家长角色标识：** 为了区分显示“爸爸”或“妈妈”身份，可在家长用户记录中增加一个枚举字段如relationship（或在现有displayName中直接注明）。例如注册或邀请家长账户时存储其身份是父亲还是母亲。这样在界面上可以个性化显示（例如欢迎语显示为“爸爸账户”或“妈妈账户”）。权限上两类家长无差异，仅作标签用途。

·         **任务审批字段：** DailyTask（每日任务记录）模型中已经包含approvalStatus, approvedBy, approvedAt, approvalNotes, bonusPoints等字段[_[55]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L90-L98)，可以支持家长审批任务的状态追踪，无需额外添加字段。家长审批通过时将approvalStatus置为approved并记录approvedBy家长ID、时间等；拒绝则置为rejected并可填写approvalNotes。开发时确保前端正确使用和更新这些字段。

·         **积分及兑换记录：** Redemption（积分兑换）模型已包含所需字段，如userId（发起兑换的孩子）、rewardTitle, pointsCost, status（pending/approved/rejected）, requestedAt, processedAt, processedBy等[_[58]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L101-L110)。这些字段足以支撑兑换请求的审批流程。数据库在家长审批兑换时会更新status和processedBy等，并在拒绝时通过逻辑将冻结积分退还孩子账户[_[51]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L182-L190)。建议在Redemption记录中增加notes字段存储家长在审批时填写的备注理由（代码中已预留该字段[_[59]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L16-L24)[_[60]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L139-L147)）。

·         **积分变动日志：** 为便于查询积分获取和消耗历史，可考虑在数据库中增加“积分交易”日志表（如points_transactions或利用现有activity_logs）。每当孩子完成任务获得积分、或兑换奖励消耗积分、家长授予额外积分等事件，都向日志记录插入一条明细。这一结构化日志便于/auth/points-history接口查询汇总。如果暂不新增表，也可通过聚合任务完成记录和兑换记录来生成积分变化列表，但实时性和复杂度较高，初期实现可以简单采用日志记录方案。

·         **数据索引与性能：** 确保在用户集合上为parentId和children字段建立索引，以便快速查询家长的孩子列表或孩子的家长关系。在每日任务和兑换请求集合上为approvalStatus和status建立索引，以支持按状态筛选（如查询pending状态记录）[_[61]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L34-L37)。初期数据量不大时可优先实现功能，性能优化可在后续通过MongoDB索引脚本npm run create-indexes来完善。

综上，数据库现有模型已基本支持家长端需求，关键是正确使用和少量扩展：允许双家长关联孩子账户，存储家长身份标签，以及记录积分兑换审批产生的日志。调整这些模型后，在Seed数据或注册流程中也要相应适配（如创建孩子账户时自动把parentId指向创建者家长，并添加children关联）。

## 开发任务列表（Claude Code 执行）

下面列出家长端 MVP 开发的具体任务，每项包含目标、实现方法和验收标准，以便交付给 Claude Code 自动执行开发。

1.      **实现家长仪表盘页面**

2.      **目标：** 开发家长仪表盘UI，展示所关联孩子的任务进度概览和积分信息。支持在“爸爸/妈妈”账户登录后查看其孩子列表并切换查看不同孩子的数据。

3.      **方法：** 复用现有ParentDashboard组件[_[1]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L170-L178)基础，完善其中的孩子选择器和统计卡片显示逻辑。使用前端API调用获取孩子列表getChildren和孩子统计getChildStats[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L66-L74)填充数据。页面布局采用Tailwind CSS，实现移动端优先的响应式设计。确保与学生端视觉风格一致（卡通插图、圆角卡片等），但界面元素更简洁突出关键数据。开发时注意利用已有组件如PointsDisplay、ProgressBar等来显示积分和进度，减少重复工作。

4. **验收标准：** 家长账号登录后进入仪表盘，能看到至少一个孩子的信息卡片，包括姓名、等级、积分及任务完成统计。若家长有多个孩子，顶部提供切换控件且功能正常。在首个孩子默认选中时，各统计模块（本周进度、连续天数、分类统计等）显示合理的数据；切换孩子后数据随之更新。无孩子时显示创建提示。页面在手机端375px宽度下排版合理，没有横向滚动，重要信息无需放大即可阅读。非家长角色访问此页面会被拒绝进入。测试通过：模拟API返回数据，界面正确渲染相应内容，切换交互无报错。
5. **实现任务审批功能**

6.      **目标：** 开发家长任务审批页及工作流，使家长可以查看所有待审批的任务并逐个审核通过或驳回。包括待审批任务列表展示和审批对话框交互。

7.      **方法：** 基于项目中已有的TaskApprovalPage和TaskApprovalWorkflow组件[_[27]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L52-L60)[_[36]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L192-L200)进行开发。页面初始化时调用后端接口GET /daily-tasks/pending-approval获取待审核任务列表，并显示总数[_[31]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L98-L106)。实现“开始审批”按钮点击后，触发显示TaskApprovalWorkflow模态，对接任务审批接口PUT /daily-tasks/{id}/approve执行具体审批操作。允许家长在审批时添加备注及额外奖励积分（前端提供输入框，随请求发送至后端存储[_[62]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L92-L99)）。审批通过后，在前端将该任务从列表移除或标记为已处理，并更新待审批计数（徽章）。审批对话框支持“下一项”导航直至列表处理完毕。确保UI在移动端全屏下操作便捷，证据内容（文本/图片）可以完整查看。参考学生端提交任务的结构，确保家长能看到孩子提交的文本说明和上传的媒体内容（利用现有组件如DailyTaskCard或自定义展示）。

8. **验收标准：** 任务审批页正确显示待审批任务数量和列表，与后端数据一致。点击“开始审批”后进入审批流程，能依次查看每条任务的详情：任务标题、孩子提交的证据（文本或图片占位），以及操作按钮。家长点击“通过”后，该任务状态在数据库更新为approved，孩子的积分相应增加（如有奖励积分）；点击“拒绝”后任务状态更新为rejected，孩子可在其界面看到被拒绝及原因。所有待审任务处理完后，审批对话框自动关闭，页面徽章数量归零。再次刷新接口确认，确无待审任务。对异常情况进行测试：审批过程中网络失败或接口报错时，界面弹出错误提示且不会卡死，家长可重试操作。确认移动端体验：在浏览器调试工具切换到手机尺寸，审批对话框和按钮操作仍然便利可行。
9. **实现积分与奖励管理功能**

10. **目标：** 开发家长端的积分/奖励管理页面，支持家长查看孩子积分余额和历史，并审核孩子提出的奖励兑换请求（批准奖励兑换或拒绝并返还积分）。

11. **方法：** 新建ParentRewardsPage组件（或在仪表盘中扩充一个版块）实现该功能模块。页面加载时调用GET /redemptions/pending接口获取待审批的兑换请求列表[_[61]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L34-L37)，调用GET /auth/points-history获取孩子积分历史数据用于绘制统计或提供明细查看。将待审批请求列表以卡片形式展示，每项注明奖励名称和所需积分、状态等，并对状态为pending的请求呈现“批准/拒绝”操作按钮。点击“批准”时，调用PUT /redemptions/{id}接口提交status: 'approved'[_[61]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L34-L37)；点击“拒绝”时提交status: 'rejected'并可附加备注[_[59]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L16-L24)[_[46]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L234-L242)。前端在收到响应后更新UI：对批准的请求，从列表移除或标记为已批准，对拒绝的则返还积分并更新积分显示。实现一个“积分明细”弹窗，复用PointsHistory组件展示近期积分获取和支出记录，供家长自助查看。注意界面布局简洁，突出待审批项目和总积分。

12. **验收标准：** 家长打开积分管理页，可以看到所选孩子当前积分总额，以及至少一条待审批的兑换请求（若有）显示正确的信息（标题、积分、日期）。当有多条请求时列表完整滚动展示。家长点击“批准”某请求后，该请求状态变为已批准（例如UI中消失或变灰显示“已批准”标签），同时孩子账户的冻结积分不变（因为提交时已扣除）；家长点击“拒绝”后，该请求从列表移除或状态标记为“已拒绝”，且孩子账户积分即时增加相应退回的点数。通过检查数据库确认：Redemption记录的status被正确更新，若rejected则用户积分值增加[_[51]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L182-L190)。家长点击“积分历史”按钮后弹出记录窗口，能够看到近期每笔积分变动条目，数据与任务完成及兑换请求相对应（例如完成任务+10分，兑换奖励-100分等）。在手机模拟下验证布局：列表项和按钮在小屏幕上未发生错位，操作按钮不重叠，弹窗可正常上下滚动浏览记录。整体通过手动测试流程：孩子提交兑换->家长页面出现请求->家长批准/拒绝->孩子积分和兑换状态正确改变，达到闭环。
13. **支持双家长账户关联同一孩子**

14. **目标：** 修改和扩展用户账户体系，使每个孩子账户可以由“爸爸”和“妈妈”两个家长账户共同管理。确保两位家长登录后都能看到该孩子及其任务/积分信息，并具有相同的审批权限。

15. **方法：** 调整后端用户模型和相关逻辑：将用户模型中的parentId改为可容纳多个家长引用（例如parents数组）或者在现有结构下允许孩子ID出现在多个家长用户的children列表中。实现家庭邀请或绑定流程：允许已有一个家长的情况下，再邀请另一位家长加入家庭。MVP可简化处理——通过管理后台或种子数据预先设置两个家长关联同一孩子，或允许家长在“家庭管理”界面输入另一位家长的帐号/邮箱以绑定孩子。需要在后台验证和确保安全：只有孩子当前的家长才能邀请新的家长加入，并在添加时互相建立关联（为新家长的children添加该孩子ID，并在孩子记录的parents加入新家长ID）。前端家庭管理弹窗中增加邀请家长选项，输入被邀请家长的邮箱发送邀请（此部分MVP可不实现邮件发送，改为直接后台创建绑定）。另外，为了前端显示区分，可在家长用户信息中记录其角色标签（Father或Mother）。

16. **验收标准：** 数据库结构更新成功：可以存储和识别一个孩子有两个家长。通过接口测试：当两个不同家长账号登录调用GET /auth/children时，都能获得同一孩子的信息[_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L66-L74)；调用统计和审批相关接口时，两者的权限范围均包含该孩子的数据（验证后端逻辑如在getRedemptions中对req.user.children的判断，对两位家长都适用[_[63]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L96-L104)[_[64]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L159-L164)）。实际操作验证：家长A创建孩子账号后，家长B接受邀请成为共同家长；随后家长B登录，其仪表盘出现孩子的数据，且能够进行任务审批和奖励审批，与家长A看到的内容一致。若家长B尝试审批不属于自己孩子的请求，应被后端拒绝（确保安全控制）。界面上对于已登录的家长用户，能看到自己的标识（比如显示“妈妈账户”），但权限无差异。此任务验收需要一定的集成测试：手动模拟邀请流程或直接在数据库插入双家长关系，然后分别登录两个账户确认数据一致性、审批互相可见。例如家长A批准了任务，家长B刷新后应看到任务已被通过，不再在待审列表中。
17. **综合测试与优化**

18. **目标：** 对家长端MVP的各个功能进行整合测试，修复BUG，并优化UI细节与响应性能。确保所有新开发功能通过自动化测试和手工验收，达到发布质量。

19. **方法：** 启动前后端服务，在本地环境完整跑通家长端主要流程：包括家长登录->查看仪表盘->审批孩子任务->审批积分兑换->查看积分记录等。编写针对关键场景的测试用例，例如：单元测试PointsHistory数据格式转换，集成测试任务审批接口效果，E2E测试模拟家长点击操作的流程。使用Playwright或Jest对核心交互进行自动测试（如任务审批工作流的多步交互）。同时检查UI在不同屏幕尺寸的表现，调整样式细节（例如长文字省略、多设备适配的Margin/Padding）。优化接口调用的错误处理与状态提示，例如增加加载状态动画、防止重复提交。清理冗余代码，确保之前要求的风格一致性（例如统一使用font-fun字体于标题，按钮颜色与学生端保持一致）。

20. **验收标准：** 所有相关单元测试和集成测试通过，测试覆盖率满足项目要求（前端覆盖率报告无重大缺口）。通过运行npm start和npm run dev手动检查，家长端功能在浏览器中无报错，控制台无未处理Promise或404接口。产品功能验收：由产品或QA按照需求逐项检查，确认家长可以完成预期的所有操作，界面显示与交互符合需求文档。性能上，仪表盘和审批页数据加载在合理时间内完成（初次加载不超过2秒），操作反馈及时。最终MVP版本在测试环境运行稳定，为后续迭代奠定基础。

---

[_[1]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L170-L178) [_[2]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L179-L185) [_[3]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L194-L202) [_[4]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L178-L186) [_[5]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L260-L268) [_[6]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L66-L74) [_[7]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L263-L271) [_[8]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L284-L293) [_[9]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L298-L307) [_[10]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L308-L316) [_[11]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L323-L332) [_[12]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L333-L341) [_[13]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L350-L358) [_[14]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L359-L364) [_[15]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L393-L401) [_[16]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L402-L410) [_[17]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L416-L424) [_[18]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L425-L433) [_[19]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L434-L436) [_[20]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L78-L86) [_[21]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L228-L237) [_[22]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L211-L219) [_[23]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L146-L155) [_[24]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L178-L185) [_[25]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L368-L376) [_[26]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx#L377-L385) ParentDashboard.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/ParentDashboard.tsx)

[_[27]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L52-L60) [_[28]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L60-L68) [_[29]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L69-L73) [_[30]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L54-L59) [_[31]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L98-L106) [_[32]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L108-L116) [_[33]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L116-L120) [_[34]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L168-L176) [_[35]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L180-L188) [_[36]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L192-L200) [_[39]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L78-L86) [_[40]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L54-L60) [_[41]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx#L62-L70) TaskApprovalPage.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/pages/TaskApprovalPage.tsx)

[_[37]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/frontend/src/services/api.ts#L228-L235) [_[38]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/frontend/src/services/api.ts#L229-L237) [_[56]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/frontend/src/services/api.ts#L228-L237) api.ts

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/frontend/src/services/api.ts_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/frontend/src/services/api.ts)

[_[42]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L156-L164) [_[43]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L170-L178) [_[53]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L158-L166) [_[54]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx#L173-L180) PointsHistory.tsx

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/frontend/src/components/PointsHistory.tsx)

[_[44]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L363-L371) [_[45]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L372-L380) [_[46]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L234-L242) [_[48]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L51-L59) [_[49]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L53-L61) [_[51]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L182-L190) [_[52]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L239-L242) [_[59]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L16-L24) [_[60]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L139-L147) [_[63]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L96-L104) [_[64]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts#L159-L164) redemptionController.ts

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/controllers/redemptionController.ts)

[_[47]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L32-L40) [_[50]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L34-L40) [_[61]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts#L34-L37) redemptionRoutes.ts

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/00ce23c2b560a413f7b8da63b1ceb0782e1c8222/backend/src/routes/redemptionRoutes.ts)

[_[55]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L90-L98) [_[57]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L3-L10) [_[58]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L101-L110) [_[62]_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts#L92-L99) index.ts

[_https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts_](https://github.com/haizhouyuan/SummerVacationPlanning/blob/06b62284421e2e24f10d4d825e95c3728a9f5e60/backend/src/types/index.ts)