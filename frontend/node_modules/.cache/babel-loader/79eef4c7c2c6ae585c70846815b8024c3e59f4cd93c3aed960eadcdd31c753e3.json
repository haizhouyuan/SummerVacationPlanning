{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PointsDisplay=_ref=>{let{points,previousPoints=0,animated=true,size='md',showLabel=true,className=''}=_ref;const[displayPoints,setDisplayPoints]=useState(previousPoints);const[isAnimating,setIsAnimating]=useState(false);const[showIncrease,setShowIncrease]=useState(false);useEffect(()=>{if(points!==previousPoints&&animated){setIsAnimating(true);setShowIncrease(true);// Animate counting up to new points\nconst difference=points-previousPoints;const duration=1000;// 1 second\nconst steps=Math.min(Math.abs(difference),50);const stepValue=difference/steps;const stepDelay=duration/steps;let currentStep=0;const timer=setInterval(()=>{currentStep++;const newValue=previousPoints+stepValue*currentStep;setDisplayPoints(Math.round(newValue));if(currentStep>=steps){clearInterval(timer);setDisplayPoints(points);setIsAnimating(false);// Hide the increase indicator after a delay\nsetTimeout(()=>{setShowIncrease(false);},2000);}},stepDelay);return()=>clearInterval(timer);}else{setDisplayPoints(points);}},[points,previousPoints,animated]);const getSizeClasses=()=>{const sizeMap={sm:'text-lg',md:'text-2xl',lg:'text-4xl'};return sizeMap[size];};const getContainerClasses=()=>{const sizeMap={sm:'px-3 py-1',md:'px-4 py-2',lg:'px-6 py-3'};return sizeMap[size];};const pointsIncrease=points-previousPoints;return/*#__PURE__*/_jsxs(\"div\",{className:`relative inline-flex items-center ${className}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:`\n          bg-gradient-to-r from-cartoon-green to-success-400 text-white font-bold rounded-cartoon-lg\n          ${getContainerClasses()}\n          ${isAnimating?'animate-pop':''}\n          shadow-cartoon\n          relative overflow-hidden\n        `,children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 animate-pulse\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-cartoon-yellow animate-sparkle\",children:\"\\u2B50\"}),/*#__PURE__*/_jsx(\"span\",{className:`${getSizeClasses()} font-fun`,children:displayPoints.toLocaleString()}),showLabel&&/*#__PURE__*/_jsx(\"span\",{className:`${size==='lg'?'text-lg':'text-sm'} opacity-90`,children:\"\\u79EF\\u5206\"})]})]}),showIncrease&&pointsIncrease>0&&/*#__PURE__*/_jsxs(\"div\",{className:`\n            absolute -top-8 left-1/2 transform -translate-x-1/2\n            bg-cartoon-yellow text-cartoon-dark px-2 py-1 rounded-cartoon text-sm font-bold\n            animate-bounce-in\n            shadow-lg\n          `,children:[\"+\",pointsIncrease]}),isAnimating&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-2 -right-2 w-1 h-1 bg-cartoon-yellow rounded-full animate-sparkle\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-2 -left-2 w-1 h-1 bg-cartoon-pink rounded-full animate-sparkle\",style:{animationDelay:'0.3s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-2 left-1/2 w-1 h-1 bg-cartoon-blue rounded-full animate-sparkle\",style:{animationDelay:'0.6s'}})]}),points>=100&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-3 -right-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-cartoon-purple text-white text-xs font-bold px-2 py-1 rounded-full animate-float\",children:[\"Lv.\",Math.floor(points/100)]})})]});};export default PointsDisplay;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PointsDisplay","_ref","points","previousPoints","animated","size","showLabel","className","displayPoints","setDisplayPoints","isAnimating","setIsAnimating","showIncrease","setShowIncrease","difference","duration","steps","Math","min","abs","stepValue","stepDelay","currentStep","timer","setInterval","newValue","round","clearInterval","setTimeout","getSizeClasses","sizeMap","sm","md","lg","getContainerClasses","pointsIncrease","children","toLocaleString","style","animationDelay","floor"],"sources":["/root/projects/SummerVacationPlanning/frontend/src/components/PointsDisplay.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\ninterface PointsDisplayProps {\n  points: number;\n  previousPoints?: number;\n  animated?: boolean;\n  size?: 'sm' | 'md' | 'lg';\n  showLabel?: boolean;\n  className?: string;\n}\n\nconst PointsDisplay: React.FC<PointsDisplayProps> = ({\n  points,\n  previousPoints = 0,\n  animated = true,\n  size = 'md',\n  showLabel = true,\n  className = '',\n}) => {\n  const [displayPoints, setDisplayPoints] = useState(previousPoints);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [showIncrease, setShowIncrease] = useState(false);\n\n  useEffect(() => {\n    if (points !== previousPoints && animated) {\n      setIsAnimating(true);\n      setShowIncrease(true);\n\n      // Animate counting up to new points\n      const difference = points - previousPoints;\n      const duration = 1000; // 1 second\n      const steps = Math.min(Math.abs(difference), 50);\n      const stepValue = difference / steps;\n      const stepDelay = duration / steps;\n\n      let currentStep = 0;\n      const timer = setInterval(() => {\n        currentStep++;\n        const newValue = previousPoints + (stepValue * currentStep);\n        setDisplayPoints(Math.round(newValue));\n\n        if (currentStep >= steps) {\n          clearInterval(timer);\n          setDisplayPoints(points);\n          setIsAnimating(false);\n          \n          // Hide the increase indicator after a delay\n          setTimeout(() => {\n            setShowIncrease(false);\n          }, 2000);\n        }\n      }, stepDelay);\n\n      return () => clearInterval(timer);\n    } else {\n      setDisplayPoints(points);\n    }\n  }, [points, previousPoints, animated]);\n\n  const getSizeClasses = () => {\n    const sizeMap = {\n      sm: 'text-lg',\n      md: 'text-2xl',\n      lg: 'text-4xl',\n    };\n    return sizeMap[size];\n  };\n\n  const getContainerClasses = () => {\n    const sizeMap = {\n      sm: 'px-3 py-1',\n      md: 'px-4 py-2',\n      lg: 'px-6 py-3',\n    };\n    return sizeMap[size];\n  };\n\n  const pointsIncrease = points - previousPoints;\n\n  return (\n    <div className={`relative inline-flex items-center ${className}`}>\n      {/* Main points display */}\n      <div\n        className={`\n          bg-gradient-to-r from-cartoon-green to-success-400 text-white font-bold rounded-cartoon-lg\n          ${getContainerClasses()}\n          ${isAnimating ? 'animate-pop' : ''}\n          shadow-cartoon\n          relative overflow-hidden\n        `}\n      >\n        {/* Background shine effect */}\n        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 animate-pulse\" />\n        \n        <div className=\"relative flex items-center space-x-2\">\n          <span className=\"text-cartoon-yellow animate-sparkle\">⭐</span>\n          <span className={`${getSizeClasses()} font-fun`}>\n            {displayPoints.toLocaleString()}\n          </span>\n          {showLabel && (\n            <span className={`${size === 'lg' ? 'text-lg' : 'text-sm'} opacity-90`}>\n              积分\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Points increase indicator */}\n      {showIncrease && pointsIncrease > 0 && (\n        <div\n          className={`\n            absolute -top-8 left-1/2 transform -translate-x-1/2\n            bg-cartoon-yellow text-cartoon-dark px-2 py-1 rounded-cartoon text-sm font-bold\n            animate-bounce-in\n            shadow-lg\n          `}\n        >\n          +{pointsIncrease}\n        </div>\n      )}\n\n      {/* Floating sparkles when animating */}\n      {isAnimating && (\n        <>\n          <div className=\"absolute -top-2 -right-2 w-1 h-1 bg-cartoon-yellow rounded-full animate-sparkle\" />\n          <div className=\"absolute -bottom-2 -left-2 w-1 h-1 bg-cartoon-pink rounded-full animate-sparkle\" style={{ animationDelay: '0.3s' }} />\n          <div className=\"absolute -top-2 left-1/2 w-1 h-1 bg-cartoon-blue rounded-full animate-sparkle\" style={{ animationDelay: '0.6s' }} />\n        </>\n      )}\n\n      {/* Level indicator based on points */}\n      {points >= 100 && (\n        <div className=\"absolute -top-3 -right-3\">\n          <div className=\"bg-cartoon-purple text-white text-xs font-bold px-2 py-1 rounded-full animate-float\">\n            Lv.{Math.floor(points / 100)}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PointsDisplay;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}