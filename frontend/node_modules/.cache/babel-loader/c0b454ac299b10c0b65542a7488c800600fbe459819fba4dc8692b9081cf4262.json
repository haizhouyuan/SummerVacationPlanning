{"ast":null,"code":"import React,{useState}from'react';import FileUpload from'./FileUpload';import MediaPreview from'./MediaPreview';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EvidenceModal=_ref=>{let{isOpen,onClose,onSubmit,task,dailyTaskId}=_ref;const{user}=useAuth();const[textEvidence,setTextEvidence]=useState('');const[notes,setNotes]=useState('');const[uploadedFiles,setUploadedFiles]=useState([]);const[uploading,setUploading]=useState(false);const[uploadError,setUploadError]=useState('');const handleFileUploadComplete=files=>{setUploadedFiles(prev=>[...prev,...files]);setUploadError('');};const handleFileUploadError=error=>{setUploadError(error);};const handleDeleteFile=fileIndex=>{setUploadedFiles(prev=>prev.filter((_,index)=>index!==fileIndex));};const handleSubmit=()=>{const evidence=[];// Add text evidence\nif(textEvidence.trim()){evidence.push({type:'text',content:textEvidence.trim(),timestamp:new Date()});}// Add file evidence\nuploadedFiles.forEach(file=>{let type='photo';if(file.type.startsWith('video/'))type='video';else if(file.type.startsWith('audio/'))type='audio';evidence.push({type,content:file.url,fileName:file.name,fileSize:file.size,filePath:file.path,timestamp:new Date()});});if(evidence.length===0){setUploadError('请至少提供一种证据');return;}onSubmit(evidence,notes);handleClose();};const handleClose=()=>{setTextEvidence('');setNotes('');setUploadedFiles([]);setUploadError('');onClose();};const getAcceptedFileTypes=()=>{const types=[];if(task.evidenceTypes.includes('photo')){types.push('image');}if(task.evidenceTypes.includes('video')){types.push('video');}// Add audio support for music practice tasks\nif(task.category==='other'&&task.tags.includes('音乐')){types.push('audio');}return types.length>0?types:['image'];};const getEvidenceTypeText=()=>{const typeMap={text:'文字描述',photo:'照片',video:'视频'};return task.evidenceTypes.map(type=>typeMap[type]||type).join('、');};if(!isOpen||!user)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"\\uD83D\\uDCCE \\u63D0\\u4EA4\\u4EFB\\u52A1\\u8BC1\\u636E\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[\"\\u4EFB\\u52A1: \",task.title]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-primary-600 mt-1\",children:[\"\\u9700\\u8981\\u63D0\\u4EA4: \",getEvidenceTypeText()]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClose,className:\"text-gray-400 hover:text-gray-600 text-xl font-bold\",children:\"\\u2715\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[task.evidenceTypes.includes('text')&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"\\uD83D\\uDCDD \\u4EFB\\u52A1\\u63CF\\u8FF0\\u6216\\u5FC3\\u5F97 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:textEvidence,onChange:e=>setTextEvidence(e.target.value),placeholder:\"\\u8BF7\\u8BE6\\u7EC6\\u63CF\\u8FF0\\u4F60\\u5B8C\\u6210\\u4EFB\\u52A1\\u7684\\u8FC7\\u7A0B\\u3001\\u9047\\u5230\\u7684\\u56F0\\u96BE\\u3001\\u5B66\\u5230\\u7684\\u77E5\\u8BC6\\u6216\\u6536\\u83B7\\u7684\\u611F\\u53D7...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none\",rows:4}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"\\u8BE6\\u7EC6\\u7684\\u63CF\\u8FF0\\u53EF\\u4EE5\\u83B7\\u5F97\\u66F4\\u597D\\u7684\\u5B66\\u4E60\\u6548\\u679C\\u54E6\\uFF01\"})]}),(task.evidenceTypes.includes('photo')||task.evidenceTypes.includes('video'))&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\uD83D\\uDDBC\\uFE0F \\u56FE\\u7247\\u6216\\u89C6\\u9891\\u8BC1\\u636E\"}),/*#__PURE__*/_jsx(FileUpload,{onUploadComplete:handleFileUploadComplete,onUploadError:handleFileUploadError,userId:user.id,taskId:dailyTaskId,acceptedTypes:getAcceptedFileTypes(),maxFiles:3}),uploadError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-danger-600 mt-2\",children:uploadError})]}),uploadedFiles.length>0&&/*#__PURE__*/_jsx(MediaPreview,{files:uploadedFiles,onDelete:handleDeleteFile,readOnly:false}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\uD83D\\uDCAD \\u989D\\u5916\\u5907\\u6CE8\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:notes,onChange:e=>setNotes(e.target.value),placeholder:\"\\u53EF\\u9009\\u7684\\u989D\\u5916\\u8BF4\\u660E...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-primary-50 border border-primary-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-primary-800 mb-2\",children:\"\\uD83D\\uDCA1 \\u4EFB\\u52A1\\u5B8C\\u6210\\u63D0\\u793A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-primary-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 \\u63D0\\u4F9B\\u8BE6\\u7EC6\\u7684\\u6587\\u5B57\\u63CF\\u8FF0\\u53EF\\u4EE5\\u5E2E\\u52A9\\u5DE9\\u56FA\\u5B66\\u4E60\\u6210\\u679C\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 \\u7167\\u7247\\u6216\\u89C6\\u9891\\u8BC1\\u636E\\u80FD\\u8BC1\\u660E\\u4F60\\u771F\\u6B63\\u5B8C\\u6210\\u4E86\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u2022 \\u5206\\u4EAB\\u4F60\\u7684\\u611F\\u53D7\\u548C\\u6536\\u83B7\\u662F\\u6700\\u91CD\\u8981\\u7684\\u90E8\\u5206\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u2022 \\u5B8C\\u6210\\u4EFB\\u52A1\\u540E\\u5C06\\u83B7\\u5F97 \",/*#__PURE__*/_jsxs(\"strong\",{children:[task.points,\" \\u79EF\\u5206\"]}),\" \\u5956\\u52B1\\uFF01\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-t border-gray-200 bg-gray-50 rounded-b-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleClose,className:\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 px-4 rounded-lg text-sm font-medium transition-colors duration-200\",children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:uploading||!textEvidence.trim()&&uploadedFiles.length===0,className:\"flex-1 bg-success-600 hover:bg-success-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg text-sm font-medium transition-colors duration-200\",children:uploading?'提交中...':'🎉 完成任务'})]})})]})});};export default EvidenceModal;","map":{"version":3,"names":["React","useState","FileUpload","MediaPreview","useAuth","jsx","_jsx","jsxs","_jsxs","EvidenceModal","_ref","isOpen","onClose","onSubmit","task","dailyTaskId","user","textEvidence","setTextEvidence","notes","setNotes","uploadedFiles","setUploadedFiles","uploading","setUploading","uploadError","setUploadError","handleFileUploadComplete","files","prev","handleFileUploadError","error","handleDeleteFile","fileIndex","filter","_","index","handleSubmit","evidence","trim","push","type","content","timestamp","Date","forEach","file","startsWith","url","fileName","name","fileSize","size","filePath","path","length","handleClose","getAcceptedFileTypes","types","evidenceTypes","includes","category","tags","getEvidenceTypeText","typeMap","text","photo","video","map","join","className","children","title","onClick","value","onChange","e","target","placeholder","rows","onUploadComplete","onUploadError","userId","id","taskId","acceptedTypes","maxFiles","onDelete","readOnly","points","disabled"],"sources":["/root/projects/SummerVacationPlanning/frontend/src/components/EvidenceModal.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Task } from '../types';\nimport FileUpload from './FileUpload';\nimport MediaPreview from './MediaPreview';\nimport { UploadResult } from '../services/upload';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface EvidenceModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (evidence: any[], notes: string) => void;\n  task: Task;\n  dailyTaskId: string;\n}\n\nconst EvidenceModal: React.FC<EvidenceModalProps> = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  task,\n  dailyTaskId,\n}) => {\n  const { user } = useAuth();\n  const [textEvidence, setTextEvidence] = useState('');\n  const [notes, setNotes] = useState('');\n  const [uploadedFiles, setUploadedFiles] = useState<UploadResult[]>([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadError, setUploadError] = useState('');\n\n  const handleFileUploadComplete = (files: UploadResult[]) => {\n    setUploadedFiles(prev => [...prev, ...files]);\n    setUploadError('');\n  };\n\n  const handleFileUploadError = (error: string) => {\n    setUploadError(error);\n  };\n\n  const handleDeleteFile = (fileIndex: number) => {\n    setUploadedFiles(prev => prev.filter((_, index) => index !== fileIndex));\n  };\n\n  const handleSubmit = () => {\n    const evidence: any[] = [];\n\n    // Add text evidence\n    if (textEvidence.trim()) {\n      evidence.push({\n        type: 'text',\n        content: textEvidence.trim(),\n        timestamp: new Date(),\n      });\n    }\n\n    // Add file evidence\n    uploadedFiles.forEach(file => {\n      let type: 'photo' | 'video' | 'audio' = 'photo';\n      if (file.type.startsWith('video/')) type = 'video';\n      else if (file.type.startsWith('audio/')) type = 'audio';\n\n      evidence.push({\n        type,\n        content: file.url,\n        fileName: file.name,\n        fileSize: file.size,\n        filePath: file.path,\n        timestamp: new Date(),\n      });\n    });\n\n    if (evidence.length === 0) {\n      setUploadError('请至少提供一种证据');\n      return;\n    }\n\n    onSubmit(evidence, notes);\n    handleClose();\n  };\n\n  const handleClose = () => {\n    setTextEvidence('');\n    setNotes('');\n    setUploadedFiles([]);\n    setUploadError('');\n    onClose();\n  };\n\n  const getAcceptedFileTypes = (): ('image' | 'video' | 'audio')[] => {\n    const types: ('image' | 'video' | 'audio')[] = [];\n    \n    if (task.evidenceTypes.includes('photo')) {\n      types.push('image');\n    }\n    if (task.evidenceTypes.includes('video')) {\n      types.push('video');\n    }\n    // Add audio support for music practice tasks\n    if (task.category === 'other' && task.tags.includes('音乐')) {\n      types.push('audio');\n    }\n    \n    return types.length > 0 ? types : ['image'];\n  };\n\n  const getEvidenceTypeText = () => {\n    const typeMap: { [key: string]: string } = {\n      text: '文字描述',\n      photo: '照片',\n      video: '视频',\n    };\n    return task.evidenceTypes.map(type => typeMap[type] || type).join('、');\n  };\n\n  if (!isOpen || !user) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex justify-between items-start\">\n            <div>\n              <h3 className=\"text-xl font-semibold text-gray-900\">\n                📎 提交任务证据\n              </h3>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                任务: {task.title}\n              </p>\n              <p className=\"text-xs text-primary-600 mt-1\">\n                需要提交: {getEvidenceTypeText()}\n              </p>\n            </div>\n            <button\n              onClick={handleClose}\n              className=\"text-gray-400 hover:text-gray-600 text-xl font-bold\"\n            >\n              ✕\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Text Evidence */}\n          {task.evidenceTypes.includes('text') && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                📝 任务描述或心得 <span className=\"text-danger-500\">*</span>\n              </label>\n              <textarea\n                value={textEvidence}\n                onChange={(e) => setTextEvidence(e.target.value)}\n                placeholder=\"请详细描述你完成任务的过程、遇到的困难、学到的知识或收获的感受...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none\"\n                rows={4}\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">\n                详细的描述可以获得更好的学习效果哦！\n              </p>\n            </div>\n          )}\n\n          {/* File Upload */}\n          {(task.evidenceTypes.includes('photo') || task.evidenceTypes.includes('video')) && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                🖼️ 图片或视频证据\n              </label>\n              <FileUpload\n                onUploadComplete={handleFileUploadComplete}\n                onUploadError={handleFileUploadError}\n                userId={user.id}\n                taskId={dailyTaskId}\n                acceptedTypes={getAcceptedFileTypes()}\n                maxFiles={3}\n              />\n              \n              {uploadError && (\n                <p className=\"text-sm text-danger-600 mt-2\">\n                  {uploadError}\n                </p>\n              )}\n            </div>\n          )}\n\n          {/* File Preview */}\n          {uploadedFiles.length > 0 && (\n            <MediaPreview\n              files={uploadedFiles}\n              onDelete={handleDeleteFile}\n              readOnly={false}\n            />\n          )}\n\n          {/* Notes */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              💭 额外备注\n            </label>\n            <input\n              type=\"text\"\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"可选的额外说明...\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n            />\n          </div>\n\n          {/* Task Completion Tips */}\n          <div className=\"bg-primary-50 border border-primary-200 rounded-lg p-4\">\n            <h4 className=\"text-sm font-semibold text-primary-800 mb-2\">\n              💡 任务完成提示\n            </h4>\n            <div className=\"text-sm text-primary-700 space-y-1\">\n              <p>• 提供详细的文字描述可以帮助巩固学习成果</p>\n              <p>• 照片或视频证据能证明你真正完成了任务</p>\n              <p>• 分享你的感受和收获是最重要的部分</p>\n              <p>• 完成任务后将获得 <strong>{task.points} 积分</strong> 奖励！</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"p-6 border-t border-gray-200 bg-gray-50 rounded-b-xl\">\n          <div className=\"flex gap-3\">\n            <button\n              onClick={handleClose}\n              className=\"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 px-4 rounded-lg text-sm font-medium transition-colors duration-200\"\n            >\n              取消\n            </button>\n            <button\n              onClick={handleSubmit}\n              disabled={uploading || (!textEvidence.trim() && uploadedFiles.length === 0)}\n              className=\"flex-1 bg-success-600 hover:bg-success-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg text-sm font-medium transition-colors duration-200\"\n            >\n              {uploading ? '提交中...' : '🎉 完成任务'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EvidenceModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}